import{B as a,E as l,hd as A}from"./chunk-FEC2V4R3.js";import{Y as u,ba as o,r as s}from"./chunk-EG5ORV3B.js";function f(i){return{screenId:i.screenId,requiredPermissions:i.requiredPermissions,baseUrl:i.baseUrl}}function p(i){return{id:i.id,developerId:i.developerId,developerName:i.developerName,name:i.name,description:i.description,shortDescription:i.shortDescription,iconUrl:i.iconUrl,status:i.status,state:i.state,integrationPoints:i.integrationPoints.map(f),healthCheckUrl:i.healthCheckUrl,categories:i.categories,tags:i.tags,averageRating:i.averageRating,reviewCount:i.reviewCount,installCount:i.installCount,isInstalled:i.isInstalled,isEnabled:i.isEnabled,updatedDate:i.updatedDate,createdDate:i.createdDate}}function m(i){return{id:i.id,appId:i.appId,userId:i.userId,userName:i.userName,organizationName:i.organizationName,rating:i.rating,title:i.title,comment:i.comment,developerResponse:i.developerResponse,isVerifiedPurchase:i.isVerifiedPurchase,helpfulCount:i.helpfulCount,createdDate:i.createdDate}}var d=class i{http=o(l);apiUrlService=o(A);baseUrl;constructor(){this.baseUrl=`${this.apiUrlService.getCurrentApiUrl()}/appstore`}getApps(e){let t=this.buildGetAppsQueryParams(e);return this.http.get(`${this.baseUrl}/apps`,{params:t}).pipe(s(r=>r.items.map(p)))}getMyApps(e){let t=this.buildGetAppsQueryParams(e);return this.http.get(`${this.baseUrl}/me/apps`,{params:t}).pipe(s(r=>r.items.map(p)))}getAppsByDeveloperId(e,t){let r=this.buildGetAppsQueryParams(t);return this.http.get(`${this.baseUrl}/developers/${e}/apps`,{params:r}).pipe(s(n=>n.items.map(p)))}buildGetAppsQueryParams(e){let t=new a().set("owner",e.owner);return e.offset!==void 0&&(t=t.set("offset",e.offset.toString())),e.limit!==void 0&&(t=t.set("limit",e.limit.toString())),e.sort!==void 0&&(t=t.set("sort",e.sort)),e.filter!==void 0&&(t=t.set("filter",e.filter)),e.status!==void 0&&(t=t.set("status",e.status)),t}getAppById(e,t){let r=new a().set("owner",t);return this.http.get(`${this.baseUrl}/apps/${e}`,{params:r}).pipe(s(p))}createApp(e){let t={developerName:e.developerName??"",name:e.name??"",description:e.description??"",shortDescription:e.shortDescription??"",iconUrl:e.iconUrl??"",integrationPoints:e.integrationPoints?.map(r=>({screenId:r.screenId,requiredPermissions:r.requiredPermissions,baseUrl:r.baseUrl}))??[],categories:e.categories??[],tags:e.tags??[],healthCheckUrl:e.healthCheckUrl};return this.http.post(`${this.baseUrl}/apps`,t).pipe(s(p))}updateApp(e,t){let r={name:t.name,description:t.description,shortDescription:t.shortDescription,iconUrl:t.iconUrl,integrationPoints:t.integrationPoints?.map(n=>({screenId:n.screenId,requiredPermissions:n.requiredPermissions,baseUrl:n.baseUrl})),healthCheckUrl:t.healthCheckUrl,categories:t.categories,tags:t.tags,status:t.status,state:t.state};return this.http.put(`${this.baseUrl}/apps/${e}`,r).pipe(s(p))}submitForReview(e){return this.updateApp(e,{status:"pendingReview"})}approveApp(e){let t={status:"approved"};return this.http.put(`${this.baseUrl}/apps/${e}`,t).pipe(s(p))}rejectApp(e){let t={status:"rejected"};return this.http.put(`${this.baseUrl}/apps/${e}`,t).pipe(s(p))}suspendApp(e){let t={status:"suspended"};return this.http.put(`${this.baseUrl}/apps/${e}`,t).pipe(s(p))}reviewApp(e,t){return this.http.post(`${this.baseUrl}/apps/${e}/submission-review`,t).pipe(s(p))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};export{m as a,d as b};
