import{a as zi,b as Ni}from"./chunk-YBD64TFN.js";import{a as rt}from"./chunk-5MHRBT53.js";import{la as nt}from"./chunk-ZDWK5NB6.js";import{a as Et,b as Mt,c as yi,d as _i,e as Ti,k as ki,l as Nt}from"./chunk-YPVSUJNA.js";import{a as Si,b as xi}from"./chunk-UJGTUYJO.js";import{g as Di,h as Ri}from"./chunk-T2ASJLBG.js";import{g as Ei,h as Mi}from"./chunk-53JQ5NAG.js";import{b as Ii}from"./chunk-GV42Z4ED.js";import{b as Rt}from"./chunk-SDMJKPKX.js";import{M as zt,b as bi,c as Dt,n as Ci,r as wi,z as ot}from"./chunk-HBFOC76W.js";import{e as Fe,f as Pe}from"./chunk-PH5YALHE.js";import{a as It,h as fi,j as kt,m as Ne}from"./chunk-6C6CC4KT.js";import{Ca as pi,D as ri,E as li,Ea as mi,F as He,Fa as ve,Ga as X,H as Ge,Ha as gi,Ja as vi,N as ai,Z as wt,aa as si,b as ti,ba as H,ca as St,d as ii,la as di,m as oi,r as ni,s as vt,sa as ci,v as ke,w as V,x as tt,xa as ze,y as Ct,ya as xt}from"./chunk-JAXNIEKX.js";import{Ib as hi,J as Ye,K as et,M as B,Pc as x,S as ie,T as y,Wc as it,Z as oe,ad as ne,e as _t,g as ei,h as Ae,k as Tt,l as _e,qb as Te,rb as ui,u as Re,v as Xe}from"./chunk-FEC2V4R3.js";import{$ as At,Aa as Ht,Ac as Wt,B as xe,D as $e,Db as D,Eb as Kt,F as Y,Fb as Ut,Fc as Jt,Gc as De,H as le,Hc as Zt,Ic as K,Jb as ue,Jc as ye,K as qe,Kb as he,Kc as Xt,Lb as mt,Lc as Yt,Nb as gt,Ob as ft,Pb as a,Qb as u,Rb as m,S as Ie,Sb as A,U as W,Vc as de,Wb as ae,Xb as se,Y as Le,Ya as d,Yb as S,Z as Ot,Zb as ee,_b as Qt,ad as Z,ba as b,bc as E,bd as R,c as Bt,cc as h,d as j,fb as J,fc as C,gc as k,gd as yt,h as N,ha as P,hc as g,ia as L,ic as f,j as pt,ja as Ee,kd as M,ld as me,mb as G,mc as Be,na as We,nb as Gt,nc as Me,ob as ht,oc as Oe,pa as F,pc as bt,qa as Ve,qb as Je,qc as _,r as fe,rb as be,rc as O,sb as p,sc as Ze,ta as w,tc as te,uc as jt,va as pe,w as Se,ya as ut,yc as $t,zc as qt}from"./chunk-EG5ORV3B.js";import{a as Q,b as we}from"./chunk-VB56BUGO.js";var Gr=(o,n)=>{let e=b(B),r=(()=>{let l=o,s={};for(;y(l);){for(let c of l.paramMap.keys)s[c]=l.paramMap.get(c);l=l.parent}return s})().clientId;return y(r)?e.createUrlTree(["admin","client",r,"assets","grid","client-assets"]):!1};var Wr=(o,n)=>{let e=b(B),r=(()=>{let l=o,s={};for(;y(l);){for(let c of l.paramMap.keys)s[c]=l.paramMap.get(c);l=l.parent}return s})().clientId;return y(r)?e.createUrlTree(["admin","client",r,"geofences","grid","client-geofences"]):!1};var tl=(o,n)=>{let e=b(B),i=ne(o).clientId;return y(i)?e.createUrlTree(["admin","client",i,"alerts","grid","client-alerts"]):!1};var al=(o,n)=>{let e=b(B),i=ne(o).distributorId;return y(i)?e.createUrlTree(["admin","distributor",i,"vendors","grid","distributor-vendors"]):!1};var hl=(o,n)=>{let e=b(B),i=ne(o).vendorId;return y(i)?e.createUrlTree(["admin","vendor",i,"clients","grid","vendor-clients"]):!1};var _l=(o,n)=>{let e=b(B),i=ne(o).superAdminId;return y(i)?e.createUrlTree(["admin","super-admin",i,"distributors","grid","super-admin-distributors"]):!1};var xl=(o,n)=>{let e=b(B),i=ne(o).vendorId;return y(i)?e.createUrlTree(["admin","vendor",i,"alerts","grid","vendor-alerts"]):!1};function Qi(o,n){o&1&&(u(0,"span",12),O(1,"(Required)"),m())}function ji(o,n){if(o&1&&(u(0,"div",11)(1,"span"),O(2),m(),ue(3,Qi,2,0,"span",12),m()),o&2){let e=n.$implicit;d(),Oe("font-semibold",e.required),d(),Ze(e.label),d(),he(e.required?3:-1)}}var lt=class o{columns=R.required();selectedColumns=R([]);disabled=R(!1);columnChange=Z();columnOptions=w([]);selectedValues=w([]);constructor(){pe(()=>{let e=this.columns().map(t=>({label:t.header,value:t.field}));this.columnOptions.set(e)}),pe(()=>{let n=this.selectedColumns();if(n.length>0)this.selectedValues.set(n);else{let e=this.columns().map(t=>t.field);this.selectedValues.set(e)}})}onSelectionChange(n){let e=n.value;this.selectedValues.set(e),this.columnChange.emit(e)}selectAll(){let n=this.columnOptions().map(e=>e.value);this.selectedValues.set(n),this.columnChange.emit(n)}clearAll(){let n=this.columnOptions().filter(e=>e.required===!0).map(e=>e.value);this.selectedValues.set(n),this.columnChange.emit(n)}resetToDefault(){this.selectAll()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=G({type:o,selectors:[["app-column-selector"]],inputs:{columns:[1,"columns"],selectedColumns:[1,"selectedColumns"],disabled:[1,"disabled"]},outputs:{columnChange:"columnChange"},decls:13,vars:14,consts:[["overlayPanel",""],[1,"inline-block"],["type","button","pTooltip","Column Visibility","tooltipPosition","bottom",1,"pi","pi-objects-column","action","hover",3,"click","disabled"],[3,"dismissable"],[1,"min-w-[300px]","max-w-[400px]"],[1,"flex","justify-between","items-center","mb-3","gap-2"],[1,"m-0","font-semibold"],[1,"column-options"],["optionLabel","label","optionValue","value","display","chip","filterBy","label","placeholder","Select columns to display","styleClass","w-full","panelStyleClass","column-selector-dropdown",3,"ngModelChange","onChange","options","ngModel","showToggleAll","showHeader","filter","disabled"],["pTemplate","item"],[1,"mt-2","text-sm","text-gray-600"],[1,"flex","align-items-center","gap-2"],[1,"text-xs","text-blue-500"]],template:function(e,t){if(e&1){let i=ee();u(0,"div",1)(1,"button",2),E("click",function(l){P(i);let s=Be(3);return L(s.toggle(l))}),m(),u(2,"p-popover",3,0)(4,"div",4)(5,"div",5)(6,"h5",6),O(7,"Show Columns"),m()(),u(8,"div",7)(9,"p-multiSelect",8),Wt("ngModelChange",function(l){return P(i),qt(t.selectedValues,l)||(t.selectedValues=l),L(l)}),E("onChange",function(l){return P(i),L(t.onSelectionChange(l))}),p(10,ji,4,4,"ng-template",9),m()(),u(11,"div",10),O(12),m()()()()}e&2&&(d(),Oe("text-primary",t.selectedValues().length<t.columnOptions().length),a("disabled",t.disabled()),D("aria-label","Column visibility selector")("aria-disabled",t.disabled()),d(),a("dismissable",!0),d(7),a("options",t.columnOptions()),$t("ngModel",t.selectedValues),a("showToggleAll",!0)("showHeader",!0)("filter",!0)("disabled",t.disabled()),d(3),jt(" ",t.selectedValues().length," of ",t.columnOptions().length," columns selected "))},dependencies:[Re,ot,Ci,wi,Mi,Ei,ze,Ne,Pe,Fe,Ri,Di],styles:[".column-selector[_ngcontent-%COMP%]     .p-multiselect{min-height:120px}.column-selector[_ngcontent-%COMP%]     .p-multiselect .p-multiselect-label{min-height:2.5rem;display:flex;align-items:center;flex-wrap:wrap;gap:.25rem}.column-selector[_ngcontent-%COMP%]     .p-multiselect .p-multiselect-token{font-size:.875rem;padding:.25rem .5rem}"]})};var Ce="grid_column_preferences",at=class o{localStorageService=b(hi);generateSchemaVersion(n){let e=n.columns.map(t=>t.field).sort((t,i)=>t.localeCompare(i)).join("|");return btoa(e).slice(0,16)}validateAndSyncPreferences(n,e){let t=this.generateSchemaVersion(n),i=new Set(n.columns.map(s=>s.field));if(!e||e.schemaVersion!==t)return this.getDefaultColumns(n);let r=e.visibleColumns.filter(s=>i.has(s)),l=this.getNewDefaultColumns(n,r);return[...r,...l]}getDefaultColumns(n){return n.defaultVisibleColumns?n.defaultVisibleColumns:n.columns.map(e=>e.field)}getNewDefaultColumns(n,e){let t=new Set(e);return this.getDefaultColumns(n).filter(r=>!t.has(r))}getVisibleColumns(n){let e=this.localStorageService.getItem(Ce)??{},t=n.entityType,i=e[t],r=this.validateAndSyncPreferences(n,i),l=this.generateSchemaVersion(n);return(ie(i)||i.schemaVersion!==l||JSON.stringify(i.visibleColumns)!==JSON.stringify(r))&&this.saveVisibleColumns(t,r,l),r}saveVisibleColumns(n,e,t){let i=this.localStorageService.getItem(Ce)??{};i[n]={visibleColumns:e,schemaVersion:t??"unknown",lastUpdated:Date.now()},this.localStorageService.setItem(Ce,i)}saveVisibleColumnsWithValidation(n,e){let t=new Set(n.columns.map(l=>l.field)),i=e.filter(l=>t.has(l));i.length!==e.length&&console.warn(`Some columns were filtered out as they don't exist in current schema for grid ${n.entityType}`);let r=this.generateSchemaVersion(n);this.saveVisibleColumns(n.entityType,i,r)}clearPreferences(n){let e=this.localStorageService.getItem(Ce)??{};delete e[n],this.localStorageService.setItem(Ce,e)}clearAllPreferences(){this.localStorageService.removeItem(Ce)}getDiagnosticInfo(){let n=this.localStorageService.getItem(Ce)??{};return Object.entries(n).reduce((e,[t,i])=>(e[t]={columnCount:i.visibleColumns.length,schemaVersion:i.schemaVersion,lastUpdated:new Date(i.lastUpdated).toISOString(),columns:i.visibleColumns},e),{})}forceRefreshPreferences(n){this.clearPreferences(n.entityType),this.getVisibleColumns(n)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=Le({token:o,factory:o.\u0275fac,providedIn:"root"})};function $i(o,n){if(o&1){let e=ee();u(0,"button",14),E("click",function(){let i;P(e);let r=h();return L((i=r.gridConfiguration())==null?null:i.onBulkImport())}),m()}if(o&2){let e,t,i,r=h();_(Jt("action hover ",((e=r.gridConfiguration())==null?null:e.bulkImportIcon)||"pi pi-upload")),a("pTooltip",((t=r.gridConfiguration())==null?null:t.bulkImportLabel)||"Bulk Import"),D("aria-label",((i=r.gridConfiguration())==null?null:i.bulkImportLabel)||"Bulk import from CSV")}}var Pi=class o{grid;gridConfigurationFactory=b(zi);activatedRoute=b(et);destroyRef=b(We);currentGridState=w(void 0);filterSubject=new j;broadcastService=b(it);detailsFactory=b(nt);detailsService=b(rt);gridPreferenceService=b(at);cdr=b(yt);gridConfiguration=w(null);columns=w([]);data=w([]);loading=w(!1);totalRecords=w(0);limit=w(Te);showFilters=w(!1);currentFilters=w({});visibleColumns=w([]);router=b(B);forceGridReconfig$=new j;lastProcessedRouteKey=w(null);constructor(){pe(()=>{let n=this.gridConfiguration();y(n?.columnsSignal)&&this.columns.set(n.columnsSignal())})}ngOnInit(){this.initializeGridConfiguration(),this.initializeFilterDebounce(),this.initializeEntityUpdatesHandler(),this.initializeClientChangeHandler(),this.initializeGridFilterAndSelect(),this.forceGridReconfig$.next()}selectGridItemFromQuery(){this.activatedRoute.queryParams.pipe(x(this.destroyRef),W(n=>{if(this.data().length>0&&y(n.details)){let e=n.details,t=this.data().find(i=>i.id===e);t&&this.grid&&setTimeout(()=>{this.grid?.setSelection(t),this.handleRowSelect({data:t})})}})).subscribe()}initializeEntityUpdatesHandler(){this.broadcastService.on("entity-updated").pipe(x(this.destroyRef)).subscribe(()=>{let n=null;this.grid?.selectedRows&&(n=Array.isArray(this.grid.selectedRows)?[...this.grid.selectedRows]:Q({},this.grid.selectedRows)),this.loadData(this.currentGridState()).pipe(x(this.destroyRef)).subscribe(()=>{n&&this.restoreSelection(Array.isArray(n)?n[0]:n)})})}initializeClientChangeHandler(){let n=xe(this.broadcastService.on("client-changed"),this.broadcastService.on("entity-changed")),e=this.broadcastService.on("entity-deleted");n.pipe(x(this.destroyRef),le(100)).subscribe(()=>{this.lastProcessedRouteKey.set(null),this.forceGridReconfig$.next()}),e.pipe(x(this.destroyRef),le(100)).subscribe(()=>{this.onRefresh()})}restoreSelection(n){if(!(ie(n)||!this.grid)){if(this.data().length===0){console.warn("Cannot restore selection: grid data is empty");return}try{if(Array.isArray(n)){let e=new Set(n.map(i=>i.id)),t=this.data().filter(i=>e.has(i.id));t.length>0&&setTimeout(()=>{this.grid?.setSelection(t),y(t[0])&&this.handleRowSelect({data:t[0]})},0)}else if(y(n?.id)){let e=this.data().find(t=>t.id===n.id);e?setTimeout(()=>{this.grid?.setSelection(e),this.handleRowSelect({data:e})},0):console.warn(`Item with id ${n.id} not found in refreshed data`)}}catch(e){console.error("Error restoring selection:",e)}}}initializeGridConfiguration(){let n=this.router.events.pipe($e(t=>t instanceof Ye),fe(()=>!1)),e=this.forceGridReconfig$.pipe(fe(()=>!0));xe(n,e).pipe(x(this.destroyRef),Ie(()=>{this.loading.set(!0);let t=this.activatedRoute.snapshot.paramMap.get("type")??this.activatedRoute.snapshot.data.gridType,i=this.getRouteParams(),r=i.clientId??i.vendorId??i.distributorId??"none",l=`${t}-${r}`;if(this.lastProcessedRouteKey()===l)return this.loading.set(!1),N;if(this.lastProcessedRouteKey.set(l),ie(t))return this.gridConfiguration.set(null),this.columns.set([]),this.currentFilters.set({}),this.loading.set(!1),N;let s=this.gridConfigurationFactory.create(t,i);if(!this.isValidConfig(s))return console.warn(`AdminGridContainer: Generated configuration for type "${t}" (key: ${l}) is invalid.`),this.gridConfiguration.set(null),this.columns.set([]),this.currentFilters.set({}),this.loading.set(!1),N;this.gridConfiguration.set(s),this.columns.set(s.columns);let c=this.gridPreferenceService.getVisibleColumns(s);if(this.visibleColumns.set(c),y(s.getFilters)){let T=s.getFilters(),v={};for(let[z,I]of Object.entries(T))y(I)&&typeof I=="object"&&(v[z]=I.value);this.currentFilters.set(v)}else this.currentFilters.set({});return this.loadData()}),Y(t=>(console.error("AdminGridContainer: Error during grid configuration or data load pipeline:",t),this.loading.set(!1),this.data.set([]),this.totalRecords.set(0),this.gridConfiguration.set(null),this.columns.set([]),this.currentFilters.set({}),N))).subscribe()}getRouteParams(){let n=this.activatedRoute,e=[];for(;n;)e.push(n.snapshot.params),n=n.parent;let t={};for(let i=e.length-1;i>=0;i--)Object.assign(t,e[i]);return t}isValidConfig(n){return y(n?.dataService)}initializeFilterDebounce(){this.filterSubject.pipe(x(this.destroyRef),le(300),W(n=>{let e=this.gridConfiguration();e&&(e.onFilterChange?.(n.field,n.value),this.loadData(this.currentGridState()).subscribe(()=>{}))})).subscribe()}loadData(n){return Se(()=>{let e=this.gridConfiguration();return this.isValidConfig(e)?(this.loading.set(!0),this.currentGridState.set(n),e.dataService.getList(e.getRequestParams(n)).pipe(x(this.destroyRef),W(t=>{this.data.set(t.items),this.totalRecords.set(t.count),this.selectGridItemFromQuery()}),Y(t=>(console.error("AdminGridContainer: Error loading data for type:",t),this.data.set([]),this.totalRecords.set(0),N)),qe(()=>{this.loading.set(!1)}))):(this.loading.set(!1),N)})}onExport(){this.grid?.exportCSV()}onRefresh(){let n=this.gridConfiguration();if(!this.isValidConfig(n))return;let e=this.detailsService.showPanel(),t=this.detailsService.getSelectedItemId();this.loadData(this.currentGridState()).pipe(x(this.destroyRef),W(()=>{if(e&&t){let i=this.findItemById(t);y(i)?this.detailsService.softRefreshSelectedItem(i):this.detailsService.softRefreshSelectedItem()}})).subscribe()}handleFilterChange(n){this.filterSubject.next({field:n.field,value:typeof n.value=="string"?n.value.trim():n.value})}handleColumnChange(n){this.visibleColumns.set(n);let e=this.gridConfiguration();e&&this.gridPreferenceService.saveVisibleColumnsWithValidation(e,n)}onFilterToggle(){let n=this.gridConfiguration();if(!this.grid||!n)return;let e=!this.showFilters();if(this.showFilters.set(e),e){if(n.getFilters){let t=n.getFilters(),i={};for(let[r,l]of Object.entries(t))y(l)&&typeof l=="object"&&(i[r]=l.value);this.currentFilters.set(i)}}else this.grid.filterable()&&n.clearFilters&&(n.clearFilters(),this.loadData().pipe(x(this.destroyRef)).subscribe())}handleLazyLoad(n){this.loadData(n).pipe(x(this.destroyRef),Y(()=>N)).subscribe()}handleRowSelect(n){if(oe(n)||oe(n.data))return;let t=this.detailsFactory.getEntityTypeFromRoute(this.activatedRoute,"type")??n.data.type,i=we(Q({},n.data),{entityType:t});this.broadcastService.broadcast("grid-item-selected",{item:i,componentType:this.detailsFactory.getDetailsComponent(t)})}findItemById(n){return this.data()?.find(t=>String(t.id)===n)??null}initializeGridFilterAndSelect(){this.broadcastService.on("grid-filter-and-select").pipe(x(this.destroyRef),le(100),Ie(n=>this.handleGridFilterAndSelectAsync(n))).subscribe()}handleGridFilterAndSelectAsync(n){return Se(()=>this.waitForColumnsReady().pipe(Ie(()=>{let e=this.gridConfiguration();if(!e)return console.warn("Grid configuration not ready for filter and select"),N;let t=n.filterField??"name",i=this.columns().find(s=>s.field===t);if(ie(i?.filter))return console.warn(`Column ${t} is not filterable, falling back to basic selection`),this.selectItemFromCurrentData(n.entityId),N;if(!e.onFilterChange)return console.warn("No filter change handler available"),this.selectItemFromCurrentData(n.entityId),N;e.onFilterChange(t,n.entityName),this.showFilters.set(!0),this.currentFilters.set({[t]:n.entityName}),this.grid&&this.grid.filterable();let r=this.currentGridState(),l={first:0,rows:r?.rows??Te,sortField:r?.sortField,sortOrder:r?.sortOrder};return this.loadData(l).pipe(W(()=>{let s=this.data().find(c=>String(c.id)===n.entityId);s&&this.grid?(this.grid.setSelection(s),this.handleRowSelect({data:s}),this.cdr.detectChanges()):console.warn(`Item ${n.entityId} not found in filtered results. The item may not match the filter criteria "${n.entityName}".`)}),fe(()=>{}),Y(s=>(console.error("Error during grid filter and select:",s),N)))})))}waitForColumnsReady(){return Se(()=>this.columns().length>0?pt(void 0):new Bt(n=>{let t=0,i=setInterval(()=>{t++,this.columns().length>0?(clearInterval(i),n.next(),n.complete()):t>=20&&(clearInterval(i),console.warn("Columns not ready after maximum wait time"),n.error(new Error("Columns not ready")))},100);return()=>clearInterval(i)}).pipe(Y(()=>(console.warn("Proceeding without columns being ready"),pt(void 0)))))}selectItemFromCurrentData(n){let e=this.data().find(t=>String(t.id)===n);e&&this.grid?(this.grid.setSelection(e),this.handleRowSelect({data:e}),this.cdr.detectChanges()):console.warn(`Item ${n} not found in current grid data. User may need to navigate pages or adjust filters manually.`)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=G({type:o,selectors:[["app-admin-grid-container"]],viewQuery:function(e,t){if(e&1&&k(Nt,5),e&2){let i;g(i=f())&&(t.grid=i.first)}},decls:16,vars:27,consts:[[1,"flex","flex-col","h-full","w-full","overflow-hidden"],[1,"p-4","content-header","flex-none","w-full"],[1,"flex","justify-between","items-center"],["id","gridTitle",1,"text-xl","font-semibold","truncate"],["aria-label","Grid actions",1,"flex-none","flex","space-x-4","align-center"],["type","button","pTooltip","Add","tooltipPosition","bottom","aria-label","Add new item",1,"pi","pi-plus","action","hover",3,"click"],["type","button","tooltipPosition","bottom",3,"class","pTooltip"],["type","button","pTooltip","Refresh","tooltipPosition","bottom","aria-label","Refresh grid data",1,"pi","pi-refresh","action","hover",3,"click"],["type","button","pTooltip","Filter","tooltipPosition","bottom","aria-label","Toggle filters",1,"pi","pi-filter-fill","action","hover",3,"click"],[3,"columnChange","columns","selectedColumns","disabled"],["pTooltip","Export CSV","tooltipPosition","bottom","aria-label","Export to CSV",1,"pi","pi-download","action","hover",3,"click"],[1,"flex-1","min-h-0","w-full","overflow-hidden"],["role","grid","styleClass","table-height",1,"h-full","max-w-full",3,"onLazyLoad","onFilterChange","rowSelect","columns","data","pagination","totalRecords","lazy","filterable","visibleColumns","selectionMode","loading","scrollable","scrollHeight","initialFilters","sortable"],["aria-live","polite","aria-atomic","true",1,"sr-only"],["type","button","tooltipPosition","bottom",3,"click","pTooltip"]],template:function(e,t){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),O(4),m(),u(5,"div",4)(6,"button",5),E("click",function(){let r;return(r=t.gridConfiguration())==null?null:r.onAdd()}),m(),ue(7,$i,1,5,"button",6),u(8,"button",7),E("click",function(){return t.onRefresh()}),m(),u(9,"button",8),E("click",function(){return t.onFilterToggle()}),m(),u(10,"app-column-selector",9),E("columnChange",function(r){return t.handleColumnChange(r)}),m(),u(11,"button",10),E("click",function(){return t.onExport()}),m()()()(),u(12,"div",11)(13,"app-grid",12),E("onLazyLoad",function(r){return t.handleLazyLoad(r)})("onFilterChange",function(r){return t.handleFilterChange(r)})("rowSelect",function(r){return t.handleRowSelect(r)}),m()(),u(14,"div",13),O(15),m()()),e&2){let i,r,l,s;d(4),te(" ",(i=t.gridConfiguration())==null?null:i.getTitle()," "),d(2),D("aria-disabled",!((r=t.gridConfiguration())!=null&&r.onAdd)),d(),he((l=t.gridConfiguration())!=null&&l.onBulkImport?7:-1),d(),D("aria-busy",t.loading()),d(),Oe("text-primary",t.showFilters()),D("aria-disabled",!((s=t.gridConfiguration())!=null&&s.filterConfig)),d(),a("columns",t.columns())("selectedColumns",t.visibleColumns())("disabled",!t.gridConfiguration()),d(3),a("columns",t.columns())("data",t.data())("pagination",!0)("totalRecords",t.totalRecords())("lazy",!0)("filterable",t.showFilters())("visibleColumns",t.visibleColumns())("selectionMode","single")("loading",t.loading())("scrollable",!0)("scrollHeight","flex")("initialFilters",t.currentFilters())("sortable",!0),D("aria-labelledby","gridTitle")("aria-busy",t.loading())("aria-rowcount",t.totalRecords()),d(2),te(" ",t.loading()?"Loading data":t.totalRecords()+" items loaded"," ")}},dependencies:[Nt,lt,Ne,Pe,Fe],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow:hidden}"],changeDetection:0})};var Wi=["colgroup"],Ji=["caption"],Zi=["header"],Xi=["body"],Yi=["footer"],eo=["summary"],to=["emptymessage"],io=["paginatorleft"],oo=["paginatorright"],no=["paginatordropdownitem"],ro=["frozenheader"],lo=["frozenbody"],ao=["frozenfooter"],so=["frozencolgroup"],co=["loadingicon"],po=["reorderindicatorupicon"],uo=["reorderindicatordownicon"],ho=["sorticon"],mo=["checkboxicon"],go=["headercheckboxicon"],fo=["togglericon"],bo=["paginatorfirstpagelinkicon"],yo=["paginatorlastpagelinkicon"],_o=["paginatorpreviouspagelinkicon"],To=["paginatornextpagelinkicon"],vo=["loader"],Co=["resizeHelper"],wo=["reorderIndicatorUp"],So=["reorderIndicatorDown"],xo=["table"],Io=["scrollableView"],Eo=["scrollableFrozenView"],ce=o=>({$implicit:o}),Mo=(o,n)=>({left:o,width:n}),Do=(o,n)=>[o,n],Ro=o=>({width:o});function ko(o,n){if(o&1&&A(0,"i"),o&2){let e=h(2);_(e.cn(e.cx("loadingIcon"),"pi-spin"+e.loadingIcon))}}function zo(o,n){if(o&1&&(Ee(),A(0,"svg",13)),o&2){let e=h(3);_(e.cx("loadingIcon")),a("spin",!0)}}function No(o,n){}function Fo(o,n){o&1&&p(0,No,0,0,"ng-template")}function Po(o,n){if(o&1&&(u(0,"span"),p(1,Fo,1,0,null,14),m()),o&2){let e=h(3);_(e.cx("loadingIcon")),d(),a("ngTemplateOutlet",e.loadingIconTemplate||e._loadingIconTemplate)}}function Lo(o,n){if(o&1&&(ae(0),p(1,zo,1,3,"svg",12)(2,Po,2,3,"span",10),se()),o&2){let e=h(2);d(),a("ngIf",!e.loadingIconTemplate&&!e._loadingIconTemplate),d(),a("ngIf",e.loadingIconTemplate||e._loadingIconTemplate)}}function Vo(o,n){if(o&1&&(u(0,"div",9),Ut("p-overlay-mask-leave-active"),Kt("p-overlay-mask-enter-active"),p(1,ko,1,2,"i",10)(2,Lo,3,2,"ng-container",11),m()),o&2){let e=h();_(e.cx("mask")),a("pBind",e.ptm("mask")),d(),a("ngIf",e.loadingIcon),d(),a("ngIf",!e.loadingIcon)}}function Bo(o,n){o&1&&S(0)}function Oo(o,n){if(o&1&&(u(0,"div",9),p(1,Bo,1,0,"ng-container",14),m()),o&2){let e=h();_(e.cx("header")),a("pBind",e.ptm("header")),d(),a("ngTemplateOutlet",e.captionTemplate||e._captionTemplate)}}function Ao(o,n){o&1&&S(0)}function Ho(o,n){if(o&1&&p(0,Ao,1,0,"ng-container",14),o&2){let e=h(3);a("ngTemplateOutlet",e.paginatorFirstPageLinkIconTemplate||e._paginatorFirstPageLinkIconTemplate)}}function Go(o,n){o&1&&p(0,Ho,1,1,"ng-template",16)}function Ko(o,n){o&1&&S(0)}function Uo(o,n){if(o&1&&p(0,Ko,1,0,"ng-container",14),o&2){let e=h(3);a("ngTemplateOutlet",e.paginatorPreviousPageLinkIconTemplate||e._paginatorPreviousPageLinkIconTemplate)}}function Qo(o,n){o&1&&p(0,Uo,1,1,"ng-template",17)}function jo(o,n){o&1&&S(0)}function $o(o,n){if(o&1&&p(0,jo,1,0,"ng-container",14),o&2){let e=h(3);a("ngTemplateOutlet",e.paginatorLastPageLinkIconTemplate||e._paginatorLastPageLinkIconTemplate)}}function qo(o,n){o&1&&p(0,$o,1,1,"ng-template",18)}function Wo(o,n){o&1&&S(0)}function Jo(o,n){if(o&1&&p(0,Wo,1,0,"ng-container",14),o&2){let e=h(3);a("ngTemplateOutlet",e.paginatorNextPageLinkIconTemplate||e._paginatorNextPageLinkIconTemplate)}}function Zo(o,n){o&1&&p(0,Jo,1,1,"ng-template",19)}function Xo(o,n){if(o&1){let e=ee();u(0,"p-paginator",15),E("onPageChange",function(i){P(e);let r=h();return L(r.onPageChange(i))}),p(1,Go,1,0,null,11)(2,Qo,1,0,null,11)(3,qo,1,0,null,11)(4,Zo,1,0,null,11),m()}if(o&2){let e=h();a("pt",e.ptm("pcPaginator"))("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("styleClass",e.cx("pcPaginator"))("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate??e._paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate??e._paginatorRightTemplate)("appendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate??e._paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)("locale",e.paginatorLocale)("unstyled",e.unstyled()),d(),a("ngIf",e.paginatorFirstPageLinkIconTemplate||e._paginatorFirstPageLinkIconTemplate),d(),a("ngIf",e.paginatorPreviousPageLinkIconTemplate||e._paginatorPreviousPageLinkIconTemplate),d(),a("ngIf",e.paginatorLastPageLinkIconTemplate||e._paginatorLastPageLinkIconTemplate),d(),a("ngIf",e.paginatorNextPageLinkIconTemplate||e._paginatorNextPageLinkIconTemplate)}}function Yo(o,n){o&1&&S(0)}function en(o,n){o&1&&S(0)}function tn(o,n){o&1&&S(0)}function on(o,n){if(o&1&&(u(0,"div",9)(1,"table",20,0),p(3,Yo,1,0,"ng-container",21),u(4,"thead",22),p(5,en,1,0,"ng-container",21),m(),A(6,"tbody",23),u(7,"tfoot",22),p(8,tn,1,0,"ng-container",21),m()()()),o&2){let e=h();_(e.cx("wrapper")),a("pBind",e.ptm("wrapper")),d(),a("pBind",e.ptm("table"))("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),d(2),a("ngTemplateOutlet",e.colGroupTemplate||e._colGroupTemplate)("ngTemplateOutletContext",K(24,ce,e.columns)),d(),_(e.cx("thead")),a("pBind",e.ptm("thead")),d(),a("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)("ngTemplateOutletContext",K(26,ce,e.columns)),d(),_(e.cx("tbody")),a("pBind",e.ptm("tbody"))("unstyled",e.unstyled())("pTreeTableBody",e.columns)("pTreeTableBodyTemplate",e.bodyTemplate??e._bodyTemplate),d(),_(e.cx("tfoot")),a("pBind",e.ptm("tfoot")),d(),a("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)("ngTemplateOutletContext",K(28,ce,e.columns))}}function nn(o,n){if(o&1&&A(0,"div",26,2),o&2){let e=h(2);a("ngClass",ye(7,Do,e.cx("scrollableView"),e.cx("frozenView")))("ttScrollableView",e.frozenColumns)("unstyled",e.unstyled())("frozen",!0)("ngStyle",K(10,Ro,e.frozenWidth))("scrollHeight",e.scrollHeight)("pBind",e.ptm("scrollableView"))}}function rn(o,n){if(o&1&&(u(0,"div",9),p(1,nn,2,12,"div",24),A(2,"div",25,1),m()),o&2){let e=h();_(e.cx("scrollableWrapper")),a("pBind",e.ptm("scrollableWrapper")),d(),a("ngIf",e.frozenColumns||e.frozenBodyTemplate||e._frozenBodyTemplate),d(),_(e.cx("scrollableView")),a("pBind",e.ptm("scrollableView"))("ttScrollableView",e.columns)("unstyled",e.unstyled())("frozen",!1)("scrollHeight",e.scrollHeight)("ngStyle",ye(12,Mo,e.frozenWidth,"calc(100% - "+e.frozenWidth+")"))}}function ln(o,n){o&1&&S(0)}function an(o,n){if(o&1&&p(0,ln,1,0,"ng-container",14),o&2){let e=h(3);a("ngTemplateOutlet",e.paginatorFirstPageLinkIconTemplate||e._paginatorFirstPageLinkIconTemplate)}}function sn(o,n){o&1&&p(0,an,1,1,"ng-template",16)}function dn(o,n){o&1&&S(0)}function cn(o,n){if(o&1&&p(0,dn,1,0,"ng-container",14),o&2){let e=h(3);a("ngTemplateOutlet",e.paginatorPreviousPageLinkIconTemplate||e._paginatorPreviousPageLinkIconTemplate)}}function pn(o,n){o&1&&p(0,cn,1,1,"ng-template",17)}function un(o,n){o&1&&S(0)}function hn(o,n){if(o&1&&p(0,un,1,0,"ng-container",14),o&2){let e=h(3);a("ngTemplateOutlet",e.paginatorLastPageLinkIconTemplate||e._paginatorLastPageLinkIconTemplate)}}function mn(o,n){o&1&&p(0,hn,1,1,"ng-template",18)}function gn(o,n){o&1&&S(0)}function fn(o,n){if(o&1&&p(0,gn,1,0,"ng-container",14),o&2){let e=h(3);a("ngTemplateOutlet",e.paginatorNextPageLinkIconTemplate||e._paginatorNextPageLinkIconTemplate)}}function bn(o,n){o&1&&p(0,fn,1,1,"ng-template",19)}function yn(o,n){if(o&1){let e=ee();u(0,"p-paginator",15),E("onPageChange",function(i){P(e);let r=h();return L(r.onPageChange(i))}),p(1,sn,1,0,null,11)(2,pn,1,0,null,11)(3,mn,1,0,null,11)(4,bn,1,0,null,11),m()}if(o&2){let e=h();a("pt",e.ptm("pcPaginator"))("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("styleClass",e.cx("pcPaginator"))("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate??e._paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate??e._paginatorRightTemplate)("appendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate??e._paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)("locale",e.paginatorLocale)("unstyled",e.unstyled()),d(),a("ngIf",e.paginatorFirstPageLinkIconTemplate||e._paginatorFirstPageLinkIconTemplate),d(),a("ngIf",e.paginatorPreviousPageLinkIconTemplate||e._paginatorPreviousPageLinkIconTemplate),d(),a("ngIf",e.paginatorLastPageLinkIconTemplate||e._paginatorLastPageLinkIconTemplate),d(),a("ngIf",e.paginatorNextPageLinkIconTemplate||e._paginatorNextPageLinkIconTemplate)}}function _n(o,n){o&1&&S(0)}function Tn(o,n){if(o&1&&(u(0,"div",9),p(1,_n,1,0,"ng-container",14),m()),o&2){let e=h();_(e.cx("footer")),a("pBind",e.ptm("footer")),d(),a("ngTemplateOutlet",e.summaryTemplate||e._summaryTemplate)}}function vn(o,n){if(o&1&&A(0,"div",9,3),o&2){let e=h();_(e.cx("columnResizerHelper")),Me("display","none"),a("pBind",e.ptm("columnResizerHelper"))}}function Cn(o,n){o&1&&(Ee(),A(0,"svg",28))}function wn(o,n){}function Sn(o,n){o&1&&p(0,wn,0,0,"ng-template")}function xn(o,n){if(o&1&&(u(0,"span",9,4),p(2,Cn,1,0,"svg",27)(3,Sn,1,0,null,14),m()),o&2){let e=h();_(e.cx("reorderIndicatorUp")),Me("display","none"),a("pBind",e.ptm("reorderIndicatorUp")),d(2),a("ngIf",!e.reorderIndicatorUpIconTemplate&&!e._reorderIndicatorUpIconTemplate),d(),a("ngTemplateOutlet",e.reorderIndicatorUpIconTemplate||e._reorderIndicatorUpIconTemplate)}}function In(o,n){o&1&&(Ee(),A(0,"svg",30))}function En(o,n){}function Mn(o,n){o&1&&p(0,En,0,0,"ng-template")}function Dn(o,n){if(o&1&&(u(0,"span",9,5),p(2,In,1,0,"svg",29)(3,Mn,1,0,null,14),m()),o&2){let e=h();_(e.cx("reorderIndicatorDown")),Me("display","none"),a("pBind",e.ptm("reorderIndicatorDown")),d(2),a("ngIf",!e.reorderIndicatorDownIconTemplate&&!e._reorderIndicatorDownIconTemplate),d(),a("ngTemplateOutlet",e.reorderIndicatorDownIconTemplate||e._reorderIndicatorDownIconTemplate)}}var Rn=["pTreeTableBody",""],kn=(o,n,e,t)=>({$implicit:o,node:n,rowData:e,columns:t}),zn=(o,n)=>({$implicit:o,frozen:n});function Nn(o,n){o&1&&S(0)}function Fn(o,n){if(o&1&&(ae(0),p(1,Nn,1,0,"ng-container",2),se()),o&2){let e=h().$implicit,t=h();d(),a("ngTemplateOutlet",t.template)("ngTemplateOutletContext",Yt(2,kn,e,e.node,e.node.data,t.columns))}}function Pn(o,n){if(o&1&&p(0,Fn,2,7,"ng-container",1),o&2){let e=n.$implicit;a("ngIf",e.visible)}}function Ln(o,n){o&1&&S(0)}function Vn(o,n){if(o&1&&(ae(0),p(1,Ln,1,0,"ng-container",2),se()),o&2){let e=h();d(),a("ngTemplateOutlet",e.tt.emptyMessageTemplate)("ngTemplateOutletContext",ye(2,zn,e.columns,e.frozen))}}var Bn=["scrollHeader"],On=["scrollHeaderBox"],An=["scrollBody"],Hn=["scrollTable"],Gn=["loadingTable"],Kn=["scrollFooter"],Un=["scrollFooterBox"],Qn=["scrollableAligner"],jn=["scroller"],$n=["ttScrollableView",""],qn=o=>({height:o}),Li=(o,n)=>({$implicit:o,options:n}),Wn=o=>({options:o}),Jn=(o,n)=>({"max-height":o,"overflow-y":n}),Zn=()=>({});function Xn(o,n){o&1&&S(0)}function Yn(o,n){o&1&&S(0)}function er(o,n){o&1&&S(0)}function tr(o,n){if(o&1&&p(0,er,1,0,"ng-container",13),o&2){let e=n.$implicit,t=n.options;h(2);let i=Be(11);a("ngTemplateOutlet",i)("ngTemplateOutletContext",ye(2,Li,e,t))}}function ir(o,n){o&1&&S(0)}function or(o,n){if(o&1&&p(0,ir,1,0,"ng-container",13),o&2){let e=n.options,t=h(3);a("ngTemplateOutlet",t.tt.loaderTemplate||t.tt._loaderTemplate)("ngTemplateOutletContext",K(2,Wn,e))}}function nr(o,n){o&1&&(ae(0),p(1,or,1,4,"ng-template",null,5,de),se())}function rr(o,n){if(o&1){let e=ee();u(0,"p-scroller",18,3),E("onLazyLoad",function(i){P(e);let r=h();return L(r.tt.onLazyItemLoad(i))}),p(2,tr,1,5,"ng-template",null,4,de)(4,nr,3,0,"ng-container",16),m()}if(o&2){let e=h();bt(K(10,qn,e.tt.scrollHeight!=="flex"?e.tt.scrollHeight:void 0)),a("items",e.tt.serializedValue)("styleClass",e.cx("scrollableBody"))("scrollHeight",e.scrollHeight!=="flex"?void 0:"100%")("itemSize",e.tt.virtualScrollItemSize||e.tt._virtualRowHeight)("lazy",e.tt.lazy)("options",e.tt.virtualScrollOptions)("pt",e.ptm("virtualScroller")),d(4),a("ngIf",e.tt.loaderTemplate||e.tt._loaderTemplate)}}function lr(o,n){o&1&&S(0)}function ar(o,n){if(o&1&&(ae(0),u(1,"div",12,6),p(3,lr,1,0,"ng-container",13),m(),se()),o&2){let e=h(),t=Be(11);d(),_(e.cx("scrollableBody")),a("pBind",e.ptm("scrollableBody"))("ngStyle",ye(6,Jn,e.tt.scrollHeight!=="flex"?e.scrollHeight:void 0,!e.frozen&&e.tt.scrollHeight?"scroll":void 0)),d(2),a("ngTemplateOutlet",t)("ngTemplateOutletContext",ye(10,Li,e.serializedValue,Zt(9,Zn)))}}function sr(o,n){o&1&&S(0)}function dr(o,n){o&1&&A(0,"div",null,8),o&2&&Me("background-color","transparent")}function cr(o,n){if(o&1&&(u(0,"table",19,7),p(2,sr,1,0,"ng-container",13),A(3,"tbody",20),m(),p(4,dr,2,2,"div",21)),o&2){let e=n.$implicit,t=n.options,i=h();bt(t.contentStyle),_(i.tt.tableStyleClass),a("pBind",i.ptm("table"))("ngClass",t.contentStyleClass)("ngStyle",i.tt.tableStyle),d(2),a("ngTemplateOutlet",i.frozen?i.tt.frozenColGroupTemplate||i.tt._frozenColGroupTemplate||i.tt.colGroupTemplate||i.tt._colGroupTemplate:i.tt.colGroupTemplate||i.tt._colGroupTemplate)("ngTemplateOutletContext",K(19,ce,i.columns)),d(),_(i.cx("tbody")),a("pBind",i.ptm("tbody"))("pBind",i.ptm("tbody"))("pTreeTableBody",i.columns)("unstyled",i.unstyled())("pTreeTableBodyTemplate",i.frozen?i.tt.frozenBodyTemplate||i.tt._frozenBodyTemplate||i.tt.bodyTemplate||i.tt._bodyTemplate:i.tt.bodyTemplate||i.tt._bodyTemplate)("serializedNodes",e)("frozen",i.frozen),d(),a("ngIf",i.frozen)}}function pr(o,n){o&1&&S(0)}function ur(o,n){o&1&&S(0)}function hr(o,n){if(o&1&&(u(0,"div",11,9)(2,"div",11,10)(4,"table",22),p(5,pr,1,0,"ng-container",13),u(6,"tfoot",14),p(7,ur,1,0,"ng-container",13),m()()()()),o&2){let e=h();_(e.cx("scrollableFooter")),a("pBind",e.ptm("scrollableFooter")),d(2),_(e.cx("scrollableFooterBox")),a("pBind",e.ptm("scrollableFooterBox")),d(2),_(e.cx("scrollableFooterTable")),a("ngClass",e.tt.tableStyleClass)("ngStyle",e.tt.tableStyle)("pBind",e.ptm("scrollableFooterTable")),d(),a("ngTemplateOutlet",e.frozen?e.tt.frozenColGroupTemplate||e.tt._frozenColGroupTemplate||e.tt.colGroupTemplate||e.tt._colGroupTemplate:e.tt.colGroupTemplate||e.tt._colGroupTemplate)("ngTemplateOutletContext",K(18,ce,e.columns)),d(),_(e.cx("tfoot")),a("pBind",e.ptm("tfoot")),d(),a("ngTemplateOutlet",e.frozen?e.tt.frozenFooterTemplate||e.tt._frozenFooterTemplate||e.tt.footerTemplate||e.tt._footerTemplate:e.tt.footerTemplate||e.tt._footerTemplate)("ngTemplateOutletContext",K(20,ce,e.columns))}}function mr(o,n){if(o&1&&(Ee(),A(0,"svg",5)),o&2){let e=h(2);a("pBind",e.ptm("nodetoggleicon")),D("aria-hidden",!0)}}function gr(o,n){if(o&1&&(Ee(),A(0,"svg",6)),o&2){let e=h(2);a("pBind",e.ptm("nodetoggleicon")),D("aria-hidden",!0)}}function fr(o,n){if(o&1&&(ae(0),p(1,mr,1,2,"svg",3)(2,gr,1,2,"svg",4),se()),o&2){let e=h();d(),a("ngIf",e.rowNode.node.expanded),d(),a("ngIf",!e.rowNode.node.expanded)}}function br(o,n){}function yr(o,n){o&1&&p(0,br,0,0,"ng-template")}var _r=`
/* For PrimeNG */
.p-treetable {
    position: relative;
}

.p-treetable table {
    border-collapse: collapse;
    width: 100%;
    table-layout: fixed;
}

.p-treetable .p-sortable-column {
    cursor: pointer;
    user-select: none;
}

.p-treetable .p-sortable-column .p-column-title,
.p-treetable .p-sortable-column .p-sortable-column-icon,
.p-treetable .p-sortable-column .p-sortable-column-badge {
    vertical-align: middle;
}

.p-treetable-sort-icon {
    color: dt('treetable.sort.icon.color');
    font-size: dt('treetable.sort.icon.size');
    width: dt('treetable.sort.icon.size');
    height: dt('treetable.sort.icon.size');
    transition: color dt('treetable.transition.duration');
}

.p-treetable .p-sortable-column .p-sortable-column-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.p-treetable-auto-layout>.p-treetable-wrapper {
    overflow-x: auto;
}

.p-treetable-auto-layout>.p-treetable-wrapper>table {
    table-layout: auto;
}

.p-treetable-hoverable-rows .p-treetable-tbody>tr {
    cursor: pointer;
}

.p-treetable-toggler {
    cursor: pointer;
    user-select: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
    overflow: hidden;
    position: relative;
}


/* Scrollable */
.p-treetable-scrollable-wrapper {
    position: relative;
}

.p-treetable-scrollable-header,
.p-treetable-scrollable-footer {
    overflow: hidden;
    flex-shrink: 0;
}

.p-treetable-scrollable-body {
    overflow: auto;
    position: relative;
}

.p-treetable-virtual-table {
    position: absolute;
}

/* Frozen Columns */
.p-treetable-frozen-view .p-treetable-scrollable-body {
    overflow: hidden;
}

.p-treetable-frozen-view>.p-treetable-scrollable-body>table>.p-treetable-tbody>tr>td:last-child {
    border-right: 0 none;
}

.p-treetable-unfrozen-view {
    position: absolute;
    top: 0;
}

/* Flex Scrollable */
.p-treetable-flex-scrollable {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
}

.p-treetable-flex-scrollable .p-treetable-scrollable-wrapper,
.p-treetable-flex-scrollable .p-treetable-scrollable-view {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
}

.p-treetable-flex-scrollable .p-treetable-virtual-scrollable-body {
    flex: 1;
}

/* Resizable */
.p-treetable-resizable>.p-treetable-wrapper {
    overflow-x: auto;
}

.p-treetable-resizable .p-treetable-thead>tr>th,
.p-treetable-resizable .p-treetable-tfoot>tr>td,
.p-treetable-resizable .p-treetable-tbody>tr>td {
    overflow: hidden;
}

.p-treetable-resizable .p-resizable-column {
    background-clip: padding-box;
    position: relative;
}

.p-treetable-resizable-fit .p-resizable-column:last-child .p-column-resizer {
    display: none;
}

.p-treetable .p-column-resizer {
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
    width: dt('treetable.column.resizer.width');
    height: 100%;
    padding: 0px;
    cursor: col-resize;
    border: 1px solid transparent;
}

.p-treetable .p-column-resizer-helper {
    width: dt('treetable.resize.indicator.width');
    position: absolute;
    z-index: 10;
    display: none;
    background: dt('treetable.resize.indicator.color');
}

.p-treetable .p-row-editor-init,
.p-treetable .p-row-editor-save,
.p-treetable .p-row-editor-cancel {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
}


/* Reorder */
.p-treetable-reorder-indicator-up,
.p-treetable-reorder-indicator-down {
    position: absolute;
    display: none;
}

[ttReorderableColumn] {
    cursor: move;
}

/* Loader */
.p-treetable-mask {
    position: absolute !important;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
}

.p-treetable-loading-icon {
    font-size: dt('treetable.loading.icon.size');
    width: dt('treetable.loading.icon.size');
    height: dt('treetable.loading.icon.size');
}

/* Virtual Scroll */
.p-treetable .p-scroller-loading {
    transform: none !important;
    min-height: 0;
    position: sticky;
    top: 0;
    left: 0;
}

.p-treetable .p-paginator-top {
    border-color: dt('treetable.paginator.top.border.color');
    border-style: solid;
    border-width: dt('treetable.paginator.top.border.width');
}

.p-treetable .p-paginator-bottom {
    border-color: dt('treetable.paginator.bottom.border.color');
    border-style: solid;
    border-width: dt('treetable.paginator.bottom.border.width');
}

.p-treetable .p-treetable-header {
    background: dt('treetable.header.background');
    color: dt('treetable.header.color');
    border-color: dt('treetable.header.border.color');
    border-style: solid;
    border-width: dt('treetable.header.border.width');
    padding: dt('treetable.header.padding');
    font-weight: dt('treetable.column.title.font.weight');
}

.p-treetable .p-treetable-footer {
    background: dt('treetable.footer.background');
    color: dt('treetable.footer.color');
    border-color: dt('treetable.footer.border.color');
    border-style: solid;
    border-width: dt('treetable.footer.border.width');
    padding: dt('treetable.footer.padding');
    font-weight: dt('treetable.column.footer.font.weight');
}

.p-treetable .p-treetable-thead>tr>th {
    padding: dt('treetable.header.cell.padding');
    background: dt('treetable.header.cell.background');
    border-color: dt('treetable.header.cell.border.color');
    border-style: solid;
    border-width: 0 0 1px 0;
    color: dt('treetable.header.cell.color');
    font-weight: dt('treetable.column.title.font.weight');
    text-align: start;
    transition: background dt('treetable.transition.duration'), color dt('treetable.transition.duration'), border-color dt('treetable.transition.duration'),
            outline-color dt('treetable.transition.duration'), box-shadow dt('treetable.transition.duration');
}

.p-treetable .p-treetable-tfoot>tr>td {
    text-align: start;
    padding: dt('treetable.footer.cell.padding');
    border-color: dt('treetable.footer.cell.border.color');
    border-style: solid;
    border-width: 0 0 1px 0;
    color: dt('treetable.footer.cell.color');
    background: dt('treetable.footer.cell.background');
    font-weight: dt('treetable.column.footer.font.weight');
}

.p-treetable .p-sortable-column {
    cursor: pointer;
    user-select: none;
    outline-color: transparent;
    vertical-align: middle;
}

.p-treetable .p-sortable-column .p-sortable-column-icon {
    color: dt('treetable.sort.icon.color');
    transition: color dt('treetable.transition.duration');
}


.p-treetable .p-sortable-column:not(.p-treetable-column-sorted):hover {
    background: dt('treetable.header.cell.hover.background');
    color: dt('treetable.header.cell.hover.color');
}

.p-treetable .p-sortable-column:not(.p-treetable-column-sorted):hover .p-treetable-sort-icon {
    color: dt('treetable.sort.icon.hover.color');
}

.p-treetable .p-sortable-column.p-treetable-column-sorted {
    background: dt('treetable.header.cell.selected.background');
    color: dt('treetable.header.cell.selected.color');
}

.p-treetable .p-sortable-column.p-treetable-column-sorted .p-treetable-sort-icon {
    color: dt('treetable.header.cell.selected.color');
}

.p-treetable .p-sortable-column:focus-visible {
    box-shadow: dt('treetable.header.cell.focus.ring.shadow');
    outline: dt('treetable.header.cell.focus.ring.width') dt('treetable.header.cell.focus.ring.style') dt('treetable.header.cell.focus.ring.color');
    outline-offset: dt('treetable.header.cell.focus.ring.offset');
}

.p-treetable-hoverable .p-treetable-selectable-row {
    cursor: pointer;
}

.p-treetable .p-treetable-tbody > tr {
    outline-color: transparent;
    background: dt('treetable.row.background');
    color: dt('treetable.row.color');
}

.p-treetable .p-treetable-tbody>tr>td {
    text-align: start;
    border-color: dt('treetable.body.cell.border.color');
    border-style: solid;
    border-width: 0 0 1px 0;
    padding: dt('treetable.body.cell.padding');
}

.p-treetable .p-treetable-tbody>tr>td .p-treetable-toggler {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    width: dt('treetable.node.toggle.button.size');
    height: dt('treetable.node.toggle.button.size');
    color: dt('treetable.node.toggle.button.color');
    border: 0 none;
    background: transparent;
    cursor: pointer;
    border-radius: dt('treetable.node.toggle.button.border.radius');
    transition: background dt('treetable.transition.duration'), color dt('treetable.transition.duration'), border-color dt('treetable.transition.duration'),
            outline-color dt('treetable.transition.duration'), box-shadow dt('treetable.transition.duration');
    outline-color: transparent;
    user-select: none;
}

.p-treetable .p-treetable-tbody>tr>td .p-treetable-toggler:enabled:hover {
    color: dt('treetable.node.toggle.button.hover.color');
    background: dt('treetable.node.toggle.button.hover.background');
}

.p-treetable .p-treetable-tbody>tr>tr.treetable-row-selected .p-treetable-toggler:hover {
    background: dt('treetable.node.toggle.button.selected.hover.background');
    color: dt('treetable.node.toggle.button.selected.hover.color');
}

.p-treetable .p-treetable-tbody>tr>td .p-treetable-toggler:focus-visible {
    box-shadow: dt('treetable.node.toggle.button.focus.ring.shadow');
    outline: dt('treetable.node.toggle.button.focus.ring.width') dt('treetable.node.toggle.button.focus.ring.style') dt('treetable.node.toggle.button.focus.ring.color');
    outline-offset: dt('treetable.node.toggle.button.focus.ring.offset');
}


.p-treetable .p-treetable-tbody>tr.p-treetable-row-selected {
    background: dt('treetable.row.selected.background');
    color: dt('treetable.row.selected.color');
}

.p-treetable-tbody > tr:focus-visible,
.p-treetable-tbody > tr.p-treetable-contextmenu-row-selected {
    box-shadow: dt('treetable.row.focus.ring.shadow');
    outline: dt('treetable.row.focus.ring.width') dt('treetable.row.focus.ring.style') dt('treetable.row.focus.ring.color');
    outline-offset: dt('treetable.row.focus.ring.offset');
}

.p-treetable .p-treetable-tbody>tr.p-treetable-row-selected .p-treetable-toggler {
    color: inherit;
}

.p-treetable .p-treetable-tbody>tr.p-treetable-row-selected .p-treetable-toggler:hover {
    background: dt('treetable.node.toggle.button.selected.hover.background');
    color: dt('treetable.node.toggle.button.selected.hover.color');
}

.p-treetable.p-treetable-hoverable-rows .p-treetable-tbody>tr:not(.p-treetable-row-selected):hover {
    background: dt('treetable.row.hover.background');
    color: dt('treetable.row.hover.color');
}

.p-treetable-gridlines .p-treetable-header {
    border-width: 1px 1px 0 1px;
}

.p-treetable-gridlines .p-treetable-footer {
    border-width: 0 1px 1px 1px;
}

.p-treetable-gridlines .p-treetable-paginator-top {
    border-width: 1px 1px 0 1px;
}

.p-treetable-gridlines .p-treetable-paginator-bottom {
    border-width: 0 1px 1px 1px;
}

.p-treetable-gridlines .p-treetable-thead > tr > th {
    border-width: 1px 0 1px 1px;
}

.p-treetable-gridlines .p-treetable-thead > tr > th:last-child {
    border-width: 1px;
}

.p-treetable-gridlines .p-treetable-tbody > tr > td {
    border-width: 1px 0 0 1px;
}

.p-treetable-gridlines .p-treetable-tbody > tr > td:last-child {
    border-width: 1px 1px 0 1px;
}

.p-treetable-gridlines .p-treetable-tbody > tr:last-child > td {
    border-width: 1px 0 1px 1px;
}

.p-treetable-gridlines .p-treetable-tbody > tr:last-child > td:last-child {
    border-width: 1px;
}

.p-treetable-gridlines .p-treetable-tfoot > tr > td {
    border-width: 1px 0 1px 1px;
}

.p-treetable-gridlines .p-treetable-tfoot > tr > td:last-child {
    border-width: 1px 1px 1px 1px;
}

.p-treetable.p-treetable-gridlines .p-treetable-thead + .p-treetable-tfoot > tr > td {
    border-width: 0 0 1px 1px;
}

.p-treetable.p-treetable-gridlines .p-treetable-thead + .p-treetable-tfoot > tr > td:last-child {
    border-width: 0 1px 1px 1px;
}

.p-treetable.p-treetable-gridlines:has(.p-treetable-thead):has(.p-treetable-tbody) .p-treetable-tbody > tr > td {
    border-width: 0 0 1px 1px;
}

.p-treetable.p-treetable-gridlines:has(.p-treetable-thead):has(.p-treetable-tbody) .p-treetable-tbody > tr > td:last-child {
    border-width: 0 1px 1px 1px;
}

.p-treetable.p-treetable-gridlines:has(.p-treetable-tbody):has(.p-treetable-tfoot) .p-treetable-tbody > tr:last-child > td {
    border-width: 0 0 0 1px;
}

.p-treetable.p-treetable-gridlines:has(.p-treetable-tbody):has(.p-treetable-tfoot) .p-treetable-tbody > tr:last-child > td:last-child {
    border-width: 0 1px 0 1px;
}

.p-treetable.p-treetable-sm .p-treetable-header {
    padding: 0.65625rem 0.875rem;
}

.p-treetable.p-treetable-sm .p-treetable-thead>tr>th {
    padding: 0.375rem 0.5rem;
}

.p-treetable.p-treetable-sm .p-treetable-tbody>tr>td {
    padding: 0.375rem 0.5rem;
}

.p-treetable.p-treetable-sm .p-treetable-tfoot>tr>td {
    padding: 0.375rem 0.5rem;
}

.p-treetable.p-treetable-sm .p-treetable-footer {
    padding: 0.375rem 0.5rem;
}

.p-treetable.p-treetable-lg .p-treetable-header {
    padding: 0.9375rem 1.25rem;
}

.p-treetable.p-treetable-lg .p-treetable-thead>tr>th {
    padding: 0.9375rem 1.25rem;
}

.p-treetable.p-treetable-lg .p-treetable-tbody>tr>td {
    padding: 0.9375rem 1.25rem;
}

.p-treetable.p-treetable-lg .p-treetable-tfoot>tr>td {
    padding: 0.9375rem 1.25rem;
}

.p-treetable.p-treetable-lg .p-treetable-footer {
    padding: 0.9375rem 1.25rem;
}

p-treetabletoggler + p-treetablecheckbox .p-checkbox,
p-treetable-toggler + p-treetable-checkbox .p-checkbox,
p-tree-table-toggler + p-tree-table-checkbox .p-checkbox {
    vertical-align: middle;
}

p-treetabletoggler + p-treetablecheckbox + span,
p-treetable-toggler + p-treetable-checkbox + span,
p-tree-table-toggler + p-tree-table-checkbox + span {
    vertical-align: middle;
}

p-treetable-sort-icon {
    display: inline-flex;
    align-items: center;
    gap: dt('treetable.header.cell.gap');
}
`,Tr={root:({instance:o})=>["p-treetable p-component",{"p-treetable-gridlines":o.showGridlines,"p-treetable-hoverable-rows":o.rowHover||o.selectionMode==="single"||o.selectionMode==="multiple","p-treetable-auto-layout":o.autoLayout,"p-treetable-resizable":o.resizableColumns,"p-treetable-resizable-fit":o.resizableColumns&&o.columnResizeMode==="fit","p-treetable-flex-scrollable":o.scrollable&&o.scrollHeight==="flex"}],loading:"p-treetable-loading",mask:"p-treetable-mask p-overlay-mask",loadingIcon:"p-treetable-loading-icon",header:"p-treetable-header",pcPaginator:({instance:o})=>["p-treetable-paginator-"+o.paginatorPosition,o.paginatorStyleClass],tableContainer:"p-treetable-table-container",table:({instance:o})=>({"p-treetable-table":!0,"p-treetable-scrollable-table":o.scrollable,"p-treetable-resizable-table":o.resizableColumns,"p-treetable-resizable-table-fit":o.resizableColumns&&o.columnResizeMode==="fit"}),thead:"p-treetable-thead",sortableColumn:({instance:o})=>({"p-sortable-column":o.isEnabled(),"p-treetable-column-sorted":o.sorted}),sortableColumnIcon:"p-treetable-sort-icon",sortableColumnBadge:"p-sortable-column-badge",columnResizer:"p-treetable-column-resizer",columnHeaderContent:"p-treetable-column-header-content",columnTitle:"p-treetable-column-title",sortIcon:"p-treetable-sort-icon",pcSortBadge:"p-treetable-sort-badge",tbody:"p-treetable-tbody",row:({instance:o})=>({"p-treetable-row-selected":o.selected}),contextMenuRow:({instance:o})=>({"p-treetable-contextmenu-row-selected":o.selected}),toggler:"p-treetable-toggler",nodeToggleButton:"p-treetable-node-toggle-button",nodeToggleIcon:"p-treetable-node-toggle-icon",pcNodeCheckbox:"p-treetable-node-checkbox",tfoot:"p-treetable-tfoot",footerCell:({instance:o})=>({"p-treetable-frozen-column":o.columnProp("frozen")}),footer:"p-treetable-footer",columnResizeIndicator:"p-treetable-column-resize-indicator",wrapper:"p-treetable-wrapper",scrollableWrapper:"p-treetable-scrollable-wrapper",scrollableView:"p-treetable-scrollable-view",frozenView:"p-treetable-frozen-view",columnResizerHelper:"p-column-resizer-helper",reorderIndicatorUp:"p-treetable-reorder-indicator-up",reorderIndicatorDown:"p-treetable-reorder-indicator-down",scrollableHeader:"p-treetable-scrollable-header",scrollableHeaderBox:"p-treetable-scrollable-header-box",scrollableHeaderTable:"p-treetable-scrollable-header-table",scrollableBody:"p-treetable-scrollable-body",scrollableFooter:"p-treetable-scrollable-footer",scrollableFooterBox:"p-treetable-scrollable-footer-box",scrollableFooterTable:"p-treetable-scrollable-footer-table"},re=(()=>{class o extends pi{name="treetable";style=_r;classes=Tr;static \u0275fac=(()=>{let e;return function(i){return(e||(e=ut(o)))(i||o)}})();static \u0275prov=Le({token:o,factory:o.\u0275fac})}return o})();var vr=new At("TREETABLE_INSTANCE"),st=(()=>{class o{sortSource=new j;selectionSource=new j;contextMenuSource=new j;uiUpdateSource=new j;totalRecordsSource=new j;sortSource$=this.sortSource.asObservable();selectionSource$=this.selectionSource.asObservable();contextMenuSource$=this.contextMenuSource.asObservable();uiUpdateSource$=this.uiUpdateSource.asObservable();totalRecordsSource$=this.totalRecordsSource.asObservable();onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onUIUpdate(e){this.uiUpdateSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=Le({token:o,factory:o.\u0275fac})}return o})(),ge=(()=>{class o extends ve{_componentStyle=b(re);bindDirectiveInstance=b(X,{self:!0});onAfterViewChecked(){this.bindDirectiveInstance.setAttrs(this.ptms(["host","root"]))}columns;styleClass;tableStyle;tableStyleClass;autoLayout;lazy=!1;lazyLoadOnInit=!0;paginator;rows;first=0;pageLinks=5;rowsPerPageOptions;alwaysShowPaginator=!0;paginatorPosition="bottom";paginatorStyleClass;paginatorDropdownAppendTo;currentPageReportTemplate="{currentPage} of {totalPages}";showCurrentPageReport;showJumpToPageDropdown;showFirstLastIcon=!0;showPageLinks=!0;defaultSortOrder=1;sortMode="single";resetPageOnSort=!0;customSort;selectionMode;contextMenuSelection;contextMenuSelectionMode="separate";dataKey;metaKeySelection=!1;compareSelectionBy="deepEquals";rowHover;loading;loadingIcon;showLoader=!0;scrollable;scrollHeight;virtualScroll;virtualScrollItemSize;virtualScrollOptions;virtualScrollDelay=150;frozenWidth;frozenColumns;resizableColumns;columnResizeMode="fit";reorderableColumns;contextMenu;rowTrackBy=(e,t)=>t;filters={};globalFilterFields;filterDelay=300;filterMode="lenient";filterLocale;paginatorLocale;get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get value(){return this._value}set value(e){this._value=e}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.log("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}get selectionKeys(){return this._selectionKeys}set selectionKeys(e){this._selectionKeys=e,this.selectionKeysChange.emit(this._selectionKeys)}showGridlines=!1;selectionChange=new F;contextMenuSelectionChange=new F;onFilter=new F;onNodeExpand=new F;onNodeCollapse=new F;onPage=new F;onSort=new F;onLazyLoad=new F;sortFunction=new F;onColResize=new F;onColReorder=new F;onNodeSelect=new F;onNodeUnselect=new F;onContextMenuSelect=new F;onHeaderCheckboxToggle=new F;onEditInit=new F;onEditComplete=new F;onEditCancel=new F;selectionKeysChange=new F;resizeHelperViewChild;reorderIndicatorUpViewChild;reorderIndicatorDownViewChild;tableViewChild;scrollableViewChild;scrollableFrozenViewChild;_value=[];_virtualRowHeight=28;_selectionKeys;serializedValue;_totalRecords=0;_multiSortMeta;_sortField;_sortOrder=1;filteredNodes;filterTimeout;_colGroupTemplate;colGroupTemplate;_captionTemplate;captionTemplate;_headerTemplate;headerTemplate;_bodyTemplate;bodyTemplate;_footerTemplate;footerTemplate;_summaryTemplate;summaryTemplate;_emptyMessageTemplate;emptyMessageTemplate;_paginatorLeftTemplate;paginatorLeftTemplate;_paginatorRightTemplate;paginatorRightTemplate;_paginatorDropdownItemTemplate;paginatorDropdownItemTemplate;_frozenHeaderTemplate;frozenHeaderTemplate;_frozenBodyTemplate;frozenBodyTemplate;_frozenFooterTemplate;frozenFooterTemplate;_frozenColGroupTemplate;frozenColGroupTemplate;_loadingIconTemplate;loadingIconTemplate;_reorderIndicatorUpIconTemplate;reorderIndicatorUpIconTemplate;_reorderIndicatorDownIconTemplate;reorderIndicatorDownIconTemplate;_sortIconTemplate;sortIconTemplate;_checkboxIconTemplate;checkboxIconTemplate;_headerCheckboxIconTemplate;headerCheckboxIconTemplate;_togglerIconTemplate;togglerIconTemplate;_paginatorFirstPageLinkIconTemplate;paginatorFirstPageLinkIconTemplate;_paginatorLastPageLinkIconTemplate;paginatorLastPageLinkIconTemplate;_paginatorPreviousPageLinkIconTemplate;paginatorPreviousPageLinkIconTemplate;_paginatorNextPageLinkIconTemplate;paginatorNextPageLinkIconTemplate;_loaderTemplate;loaderTemplate;lastResizerHelperX;reorderIconWidth;reorderIconHeight;draggedColumn;dropPosition;preventSelectionSetterPropagation;_selection;selectedKeys={};rowTouched;editingCell;editingCellData;editingCellField;editingCellClick;documentEditListener;initialized;toggleRowIndex;onInit(){this.lazy&&this.lazyLoadOnInit&&!this.virtualScroll&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.initialized=!0}templates;onAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"reorderindicatorupicon":this.reorderIndicatorUpIconTemplate=e.template;break;case"reorderindicatordownicon":this.reorderIndicatorDownIconTemplate=e.template;break;case"sorticon":this.sortIconTemplate=e.template;break;case"checkboxicon":this.checkboxIconTemplate=e.template;break;case"headercheckboxicon":this.headerCheckboxIconTemplate=e.template;break;case"togglericon":this.togglerIconTemplate=e.template;break;case"paginatorfirstpagelinkicon":this.paginatorFirstPageLinkIconTemplate=e.template;break;case"paginatorlastpagelinkicon":this.paginatorLastPageLinkIconTemplate=e.template;break;case"paginatorpreviouspagelinkicon":this.paginatorPreviousPageLinkIconTemplate=e.template;break;case"paginatornextpagelinkicon":this.paginatorNextPageLinkIconTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break}})}filterService=b(ci);tableService=b(st);zone=b(Ve);onChanges(e){e.value&&(this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,this.sortMode=="single"&&this.sortField?this.sortSingle():this.sortMode=="multiple"&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.updateSerializedValue(),this.tableService.onUIUpdate(this.value)),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle()),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle()),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,this.sortMode==="multiple"&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateselectedKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}updateSerializedValue(){this.serializedValue=[],this.paginator?this.serializePageNodes():this.serializeNodes(null,this.filteredNodes||this.value,0,!0)}serializeNodes(e,t,i,r){if(t&&t.length)for(let l of t){l.parent=e;let s={node:l,parent:e,level:i,visible:r&&(e?e.expanded:!0)};this.serializedValue.push(s),s.visible&&l.expanded&&this.serializeNodes(l,l.children,i+1,s.visible)}}serializePageNodes(){let e=this.filteredNodes||this.value;if(this.serializedValue=[],e&&e.length){let t=this.lazy?0:this.first;for(let i=t;i<t+this.rows;i++){let r=e[i];r&&(this.serializedValue.push({node:r,parent:null,level:0,visible:!0}),this.serializeNodes(r,r.children,1,!0))}}}updateselectedKeys(){if(this.dataKey&&this._selection)if(this.selectedKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectedKeys[String(H(e.data,this.dataKey))]=1;else this.selectedKeys[String(H(this._selection.data,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.serializePageNodes(),this.onPage.emit({first:this.first,rows:this.rows}),this.tableService.onUIUpdate(this.value),this.scrollable&&this.resetScrollTop()}sort(e){let t=e.originalEvent;if(this.sortMode==="single"&&(this._sortOrder=this.sortField===e.field?this.sortOrder*-1:this.defaultSortOrder,this._sortField=e.field,this.sortSingle(),this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.sortMode==="multiple"){let i=t.metaKey||t.ctrlKey,r=this.getSortMeta(e.field);r?i?r.order=r.order*-1:(this._multiSortMeta=[{field:e.field,order:r.order*-1}],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()):((!i||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}}sortSingle(){if(this.sortField&&this.sortOrder){this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortNodes(this.value),this.hasFilter()&&this._filter());let e={field:this.sortField,order:this.sortOrder};this.onSort.emit(e),this.tableService.onSort(e),this.updateSerializedValue()}}sortNodes(e){if(!(!e||e.length===0)){this.customSort?this.sortFunction.emit({data:e,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):e.sort((t,i)=>{let r=H(t.data,this.sortField),l=H(i.data,this.sortField),s=0;return r==null&&l!=null?s=-1:r!=null&&l==null?s=1:r==null&&l==null?s=0:typeof r=="string"&&typeof l=="string"?s=r.localeCompare(l,void 0,{numeric:!0}):s=r<l?-1:r>l?1:0,this.sortOrder*s});for(let t of e)this.sortNodes(t.children)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortMultipleNodes(this.value),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.updateSerializedValue(),this.tableService.onSort(this.multiSortMeta))}sortMultipleNodes(e){if(!(!e||e.length===0)){this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):e.sort((t,i)=>this.multisortField(t,i,this.multiSortMeta,0));for(let t of e)this.sortMultipleNodes(t.children)}}multisortField(e,t,i,r){if(wt(this.multiSortMeta)||wt(i[r]))return 0;let l=H(e.data,i[r].field),s=H(t.data,i[r].field),c=0;if(l==null&&s!=null?c=-1:l!=null&&s==null?c=1:l==null&&s==null&&(c=0),typeof l=="string"||l instanceof String){if(l.localeCompare&&l!=s)return i[r].order*l.localeCompare(s,void 0,{numeric:!0})}else c=l<s?-1:1;return l==s?i.length-1>r?this.multisortField(e,t,i,r+1):0:i[r].order*c}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length){for(let t=0;t<this.multiSortMeta.length;t++)if(this.multiSortMeta[t].field===e)return this.multiSortMeta[t]}return null}isSorted(e){if(this.sortMode==="single")return this.sortField&&this.sortField===e;if(this.sortMode==="multiple"){let t=!1;if(this.multiSortMeta){for(let i=0;i<this.multiSortMeta.length;i++)if(this.multiSortMeta[i].field==e){t=!0;break}}return t}}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}onLazyItemLoad(e){this.onLazyLoad.emit(we(Q(Q({},this.createLazyLoadMetadata()),e),{rows:e.last-e.first}))}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.scrollableViewChild&&this.scrollableViewChild.scrollToVirtualIndex(e),this.scrollableFrozenViewChild&&this.scrollableViewChild.scrollToVirtualIndex(e)}scrollTo(e){this.scrollableViewChild&&this.scrollableViewChild.scrollTo(e),this.scrollableFrozenViewChild&&this.scrollableViewChild.scrollTo(e)}isEmpty(){let e=this.filteredNodes||this.value;return e==null||e.length==0}getBlockableElement(){return this.el.nativeElement.children[0]}onColumnResizeBegin(e){let t=Ge(this.el?.nativeElement).left;this.lastResizerHelperX=e.pageX-t+this.el?.nativeElement.scrollLeft,e.preventDefault()}onColumnResize(e){let t=Ge(this.el?.nativeElement).left;this.el?.nativeElement.setAttribute("data-p-unselectable-text","true"),!this.$unstyled()&&oi(this.el.nativeElement,{"user-select":"none"}),this.resizeHelperViewChild.nativeElement.style.height=this.el?.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-t+this.el?.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(e,t){let i=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=t.offsetWidth,l=r+i,s=t.style.minWidth||15;if(r+i>parseInt(s)){if(this.columnResizeMode==="fit"){let c=t.nextElementSibling;for(;!c.offsetParent;)c=c.nextElementSibling;if(c){let T=c.offsetWidth-i,v=c.style.minWidth||15;if(l>15&&T>parseInt(v))if(this.scrollable){let z=this.findParentScrollableView(t),I=V(z,'[data-pc-section="scrollablebody"] table')||V(z,'[data-pc-name="virtualscroller"] table'),U=V(z,'[data-pc-section="scrollableheadertable"]'),$=V(z,'[data-pc-section="scrollablefootertable"]'),q=He(t);this.resizeColGroup(U,q,l,T),this.resizeColGroup(I,q,l,T),this.resizeColGroup($,q,l,T)}else t.style.width=l+"px",c&&(c.style.width=T+"px")}}else if(this.columnResizeMode==="expand")if(this.scrollable){let c=this.findParentScrollableView(t),T=V(c,'[data-pc-section="scrollablebody"]')||V(c,'[data-pc-name="virtualscroller"]'),v=V(c,'[data-pc-section="scrollableheader"]'),z=V(c,'[data-pc-section="scrollablefooter"]'),I=V(c,'[data-pc-section="scrollablebody"] table')||V(c,'[data-pc-name="virtualscroller"] table'),U=V(c,'[data-pc-section="scrollableheadertable"]'),$=V(c,'[data-pc-section="scrollablefootertable"]');I.style.width=I.offsetWidth+i+"px",U.style.width=U.offsetWidth+i+"px",$&&($.style.width=$.offsetWidth+i+"px");let q=He(t),Qe=t?I.offsetWidth+i:l,je=t?U.offsetWidth+i:l,dt=this.el?.nativeElement.offsetWidth>=Qe,ct=(Pt,Lt,Vt,Ki)=>{Pt&&Lt&&(Pt.style.width=Ki?Vt+vt(T)+"px":"auto",Lt.style.width=Vt+"px")};ct(T,I,Qe,dt),ct(v,U,je,dt),ct(z,$,je,dt),this.resizeColGroup(U,q,l,null),this.resizeColGroup(I,q,l,null),this.resizeColGroup($,q,l,null)}else{this.tableViewChild.nativeElement.style.width=this.tableViewChild?.nativeElement.offsetWidth+i+"px",t.style.width=l+"px";let c=this.tableViewChild?.nativeElement.style.width;this.el.nativeElement.style.width=c+"px"}this.onColResize.emit({element:t,delta:i})}this.resizeHelperViewChild.nativeElement.style.display="none",this.el.nativeElement.removeAttribute("data-p-unselectable-text"),!this.$unstyled()&&(this.el.nativeElement.style["user-select"]="")}findParentScrollableView(e){if(e){let t=e.parentElement;for(;t&&!V(t,'[data-pc-section="scrollableview"]');)t=t.parentElement;return t}else return null}resizeColGroup(e,t,i,r){if(e){let l=e.children[0].nodeName==="COLGROUP"?e.children[0]:null;if(l){let s=l.children[t],c=s.nextElementSibling;s.style.width=i+"px",c&&r&&(c.style.width=r+"px")}else throw"Scrollable tables require a colgroup to support resizable columns"}}onColumnDragStart(e,t){this.reorderIconWidth=li(this.reorderIndicatorUpViewChild?.nativeElement),this.reorderIconHeight=ri(this.reorderIndicatorDownViewChild?.nativeElement),this.draggedColumn=t,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,t){if(this.reorderableColumns&&this.draggedColumn&&t){e.preventDefault();let i=Ge(this.el?.nativeElement),r=Ge(t);if(this.draggedColumn!=t){let l=r.left-i.left,s=i.top-r.top,c=r.left+t.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=r.top-i.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=r.top-i.top+t.offsetHeight+"px",e.pageX>c?(this.reorderIndicatorUpViewChild.nativeElement.style.left=l+t.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=l+t.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=l-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=l-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,t){if(e.preventDefault(),this.draggedColumn){let i=It.indexWithinGroup(this.draggedColumn,"ttreorderablecolumn"),r=It.indexWithinGroup(t,"ttreorderablecolumn"),l=i!=r;l&&(r-i==1&&this.dropPosition===-1||i-r==1&&this.dropPosition===1)&&(l=!1),l&&r<i&&this.dropPosition===1&&(r=r+1),l&&r>i&&this.dropPosition===-1&&(r=r-1),l&&(di(this.columns,i,r),this.onColReorder.emit({dragIndex:i,dropIndex:r,columns:this.columns})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}handleRowClick(e){let t=e.originalEvent.target.nodeName;if(!(t=="INPUT"||t=="BUTTON"||t=="A"||ai(e.originalEvent.target))){if(this.selectionMode){this.preventSelectionSetterPropagation=!0;let i=e.rowNode,r=this.isSelected(i.node),l=this.rowTouched?!1:this.metaKeySelection,s=this.dataKey?String(H(i.node.data,this.dataKey)):null;if(l){let c=e.originalEvent,T=c.metaKey||c.ctrlKey;if(r&&T){if(this.isSingleSelectionMode())this._selection=null,this.selectedKeys={},this.selectionChange.emit(null);else{let v=this.findIndexInSelection(i.node);this._selection=this.selection.filter((z,I)=>I!=v),this.selectionChange.emit(this.selection),s&&delete this.selectedKeys[s]}this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:i.node,type:"row"})}else this.isSingleSelectionMode()?(this._selection=i.node,this.selectionChange.emit(i.node),s&&(this.selectedKeys={},this.selectedKeys[s]=1)):this.isMultipleSelectionMode()&&(T?this._selection=this.selection||[]:(this._selection=[],this.selectedKeys={}),this._selection=[...this.selection,i.node],this.selectionChange.emit(this.selection),s&&(this.selectedKeys[s]=1)),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:i.node,type:"row",index:e.rowIndex})}else if(this.selectionMode==="single")r?(this._selection=null,this.selectedKeys={},this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:i.node,type:"row"})):(this._selection=i.node,this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:i.node,type:"row",index:e.rowIndex}),s&&(this.selectedKeys={},this.selectedKeys[s]=1));else if(this.selectionMode==="multiple")if(r){let c=this.findIndexInSelection(i.node);this._selection=this.selection.filter((T,v)=>v!=c),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:i.node,type:"row"}),s&&delete this.selectedKeys[s]}else this._selection=this.selection?[...this.selection,i.node]:[i.node],this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:i.node,type:"row",index:e.rowIndex}),s&&(this.selectedKeys[s]=1);this.tableService.onSelectionChange()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){let t=e.rowNode.node,i=()=>{this.contextMenu.show(e.originalEvent),this.contextMenu.hideCallback=()=>{this.contextMenuSelection=null,this.contextMenuSelectionChange.emit(),this.tableService.onContextMenu(null)}};if(this.contextMenuSelectionMode==="separate")this.contextMenuSelection=t,this.contextMenuSelectionChange.emit(t),this.tableService.onContextMenu(t),i(),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:t});else if(this.contextMenuSelectionMode==="joint"){this.preventSelectionSetterPropagation=!0;let r=this.isSelected(t),l=this.dataKey?String(H(t.data,this.dataKey)):null;r||(this.isSingleSelectionMode()?(this.selection=t,this.selectionChange.emit(t)):this.isMultipleSelectionMode()&&(this.selection=[t],this.selectionChange.emit(this.selection)),l&&(this.selectedKeys[l]=1)),this.contextMenuSelection=t,this.contextMenuSelectionChange.emit(t),this.tableService.onContextMenu(t),i(),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:t})}}}toggleNodeWithCheckbox(e){this.selection=this.selection||[],this.preventSelectionSetterPropagation=!0;let t=e.rowNode.node;this.isSelected(t)?(this.propagateSelectionDown(t,!1),e.rowNode.parent&&this.propagateSelectionUp(t.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.propagateSelectionDown(t,!0),e.rowNode.parent&&this.propagateSelectionUp(t.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:t})),this.tableService.onSelectionChange()}toggleNodesWithCheckbox(e,t){let i=this.filteredNodes||this.value;this._selection=t&&i?i.slice():[],this.toggleAll(t),t||(this._selection=[],this.selectedKeys={}),this.preventSelectionSetterPropagation=!0,this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:t})}toggleAll(e){let t=this.filteredNodes||this.value;if(this.selectionKeys){if(t&&t.length){for(let i of t)this.propagateDown(i,e);this.selectionKeysChange.emit(this.selectionKeys)}}else if(t&&t.length)for(let i of t)this.propagateSelectionDown(i,e)}propagateSelectionUp(e,t){if(e.children&&e.children.length){let r=0,l=!1,s=this.dataKey?String(H(e.data,this.dataKey)):null;for(let c of e.children)this.isSelected(c)?r++:c.partialSelected&&(l=!0);if(t&&r==e.children.length)this._selection=[...this.selection||[],e],e.partialSelected=!1,s&&(this.selectedKeys[s]=1);else{if(!t){let c=this.findIndexInSelection(e);c>=0&&(this._selection=this.selection.filter((T,v)=>v!=c),s&&delete this.selectedKeys[s])}l||r>0&&r!=e.children.length?e.partialSelected=!0:e.partialSelected=!1}}let i=e.parent;e.checked=t,i&&this.propagateSelectionUp(i,t)}propagateSelectionDown(e,t){let i=this.findIndexInSelection(e),r=this.dataKey?String(H(e.data,this.dataKey)):null;if(t&&i==-1?(this._selection=[...this.selection||[],e],r&&(this.selectedKeys[r]=1)):!t&&i>-1&&(this._selection=this.selection.filter((l,s)=>s!=i),r&&delete this.selectedKeys[r]),e.partialSelected=!1,e.checked=t,e.children&&e.children.length)for(let l of e.children)this.propagateSelectionDown(l,t)}isSelected(e){return e&&this.selection?this.dataKey?e.hasOwnProperty("checked")?e.checked:this.selectedKeys[H(e.data,this.dataKey)]!==void 0:Array.isArray(this.selection)?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1}isNodeSelected(e){return this.selectionMode&&this.selectionKeys?this.selectionKeys[this.nodeKey(e)]?.checked===!0:!1}isNodePartialSelected(e){return this.selectionMode&&this.selectionKeys?this.selectionKeys[this.nodeKey(e)]?.partialChecked===!0:!1}nodeKey(e){return H(e,this.dataKey)||H(e?.data,this.dataKey)}toggleCheckbox(e){let{rowNode:t,check:i,originalEvent:r}=e,l=t.node;this.selectionKeys?(this.propagateDown(l,i),l.parent&&this.propagateUp(l.parent,i),this.selectionKeysChange.emit(this.selectionKeys)):this.toggleNodeWithCheckbox({originalEvent:r,rowNode:t}),this.tableService.onSelectionChange()}propagateDown(e,t){if(t?this.selectionKeys[this.nodeKey(e)]={checked:!0,partialChecked:!1}:delete this.selectionKeys[this.nodeKey(e)],e.children&&e.children.length)for(let i of e.children)this.propagateDown(i,t)}propagateUp(e,t){let i=0,r=!1;for(let s of e.children)this.selectionKeys[this.nodeKey(s)]&&this.selectionKeys[this.nodeKey(s)].checked?i++:this.selectionKeys[this.nodeKey(s)]&&this.selectionKeys[this.nodeKey(s)].partialChecked&&(r=!0);t&&i===e.children.length?this.selectionKeys[this.nodeKey(e)]={checked:!0,partialChecked:!1}:(t||delete this.selectionKeys[this.nodeKey(e)],r||i>0&&i!==e.children.length?this.selectionKeys[this.nodeKey(e)]={checked:!1,partialChecked:!0}:this.selectionKeys[this.nodeKey(e)]={checked:!1,partialChecked:!1});let l=e.parent;l&&this.propagateUp(l,t)}findIndexInSelection(e){let t=-1;if(this.selection&&this.selection.length){for(let i=0;i<this.selection.length;i++)if(this.equals(e,this.selection[i])){t=i;break}}return t}isSingleSelectionMode(){return this.selectionMode==="single"}isMultipleSelectionMode(){return this.selectionMode==="multiple"}equals(e,t){return this.compareSelectionBy==="equals"?St(e,t):St(e.data,t.data,this.dataKey)}filter(e,t,i){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[t]&&delete this.filters[t]:this.filters[t]={value:e,matchMode:i},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay)}filterGlobal(e,t){this.filter(e,"global",t)}isFilterBlank(e){return e!=null?!!(typeof e=="string"&&e.trim().length==0||Array.isArray(e)&&e.length==0):!0}_filter(){if(this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(!this.hasFilter())this.filteredNodes=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0);else{let t;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");t=this.globalFilterFields||this.columns}this.filteredNodes=[];let i=this.filterMode==="strict",r=!1;for(let l of this.value){let s=Q({},l),c=!0,T=!1,v;for(let I in this.filters)if(this.filters.hasOwnProperty(I)&&I!=="global"){let U=this.filters[I],$=I,q=U.value,Qe=U.matchMode||"startsWith",je=this.filterService.filters[Qe];if(v={filterField:$,filterValue:q,filterConstraint:je,isStrictMode:i},(i&&!(this.findFilteredNodes(s,v)||this.isFilterMatched(s,v))||!i&&!(this.isFilterMatched(s,v)||this.findFilteredNodes(s,v)))&&(c=!1),!c)break}if(this.filters.global&&!T&&t){let I=Q({},s),U,$=this.filters.global.value,q=this.filterService.filters[this.filters.global.matchMode];v={filterField:U,filterValue:$,filterConstraint:q,isStrictMode:i,globalFilterFieldsArray:t},(i&&(this.findFilteredNodes(I,v)||this.isFilterMatched(I,v))||!i&&(this.isFilterMatched(I,v)||this.findFilteredNodes(I,v)))&&(T=!0,s=I)}let z=c;this.filters.global&&(z=c&&T),z&&this.filteredNodes.push(s),r=r||!c||T||c&&this.filteredNodes.length>0||!T&&this.filteredNodes.length===0}r||(this.filteredNodes=null),this.paginator&&(this.totalRecords=this.filteredNodes?this.filteredNodes.length:this.value?this.value.length:0)}this.cd.markForCheck()}this.first=0;let e=this.filteredNodes||this.value;this.onFilter.emit({filters:this.filters,filteredValue:e}),this.tableService.onUIUpdate(e),this.updateSerializedValue(),this.scrollable&&this.resetScrollTop()}findFilteredNodes(e,t){if(e){let i=!1;if(e.children){let r=[...e.children];e.children=[];for(let l of r){let s=Q({},l);this.isFilterMatched(s,t)&&(i=!0,e.children.push(s))}}if(i)return!0}}isFilterMatched(e,t){let{filterField:i,filterValue:r,filterConstraint:l,isStrictMode:s,globalFilterFieldsArray:c}=t,T=!1,v=z=>l(H(e.data,z),r,this.filterLocale);return T=c?.length?c.some(z=>v(z.field||z)):v(i),(!T||s&&!this.isNodeLeaf(e))&&(T=this.findFilteredNodes(e,{filterField:i,filterValue:r,filterConstraint:l,isStrictMode:s,globalFilterFieldsArray:c})||T),T}isNodeLeaf(e){return e.leaf===!1?!1:!(e.children&&e.children.length)}hasFilter(){let e=!0;for(let t in this.filters)if(this.filters.hasOwnProperty(t)){e=!1;break}return!e}reset(){this._sortField=null,this._sortOrder=1,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredNodes=null,this.filters={},this.first=0,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}updateEditingCell(e,t,i){this.editingCell=e,this.editingCellData=t,this.editingCellField=i,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&ke(this.editingCell,".ng-invalid.ng-dirty").length===0}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=this.renderer.listen(this.document,"click",e=>{this.editingCell&&!this.editingCellClick&&this.isEditingCellValid()&&(!this.$unstyled()&&ii(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData}),this.editingCellField=null,this.editingCellData=null,this.unbindDocumentEditListener()),this.editingCellClick=!1}))}unbindDocumentEditListener(){this.documentEditListener&&(this.documentEditListener(),this.documentEditListener=null)}onDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.editingCellField=null,this.editingCellData=null,this.initialized=null}get dataP(){return this.cn({scrollable:this.scrollable,"flex-scrollable":this.scrollable&&this.scrollHeight==="flex",loading:this.loading,empty:this.isEmpty()})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=ut(o)))(i||o)}})();static \u0275cmp=G({type:o,selectors:[["p-treeTable"],["p-treetable"],["p-tree-table"]],contentQueries:function(t,i,r){if(t&1&&(C(r,Wi,4),C(r,Ji,4),C(r,Zi,4),C(r,Xi,4),C(r,Yi,4),C(r,eo,4),C(r,to,4),C(r,io,4),C(r,oo,4),C(r,no,4),C(r,ro,4),C(r,lo,4),C(r,ao,4),C(r,so,4),C(r,co,4),C(r,po,4),C(r,uo,4),C(r,ho,4),C(r,mo,4),C(r,go,4),C(r,fo,4),C(r,bo,4),C(r,yo,4),C(r,_o,4),C(r,To,4),C(r,vo,4),C(r,ze,4)),t&2){let l;g(l=f())&&(i._colGroupTemplate=l.first),g(l=f())&&(i._captionTemplate=l.first),g(l=f())&&(i._headerTemplate=l.first),g(l=f())&&(i._bodyTemplate=l.first),g(l=f())&&(i._footerTemplate=l.first),g(l=f())&&(i._summaryTemplate=l.first),g(l=f())&&(i._emptyMessageTemplate=l.first),g(l=f())&&(i._paginatorLeftTemplate=l.first),g(l=f())&&(i._paginatorRightTemplate=l.first),g(l=f())&&(i._paginatorDropdownItemTemplate=l.first),g(l=f())&&(i._frozenHeaderTemplate=l.first),g(l=f())&&(i._frozenBodyTemplate=l.first),g(l=f())&&(i._frozenFooterTemplate=l.first),g(l=f())&&(i._frozenColGroupTemplate=l.first),g(l=f())&&(i._loadingIconTemplate=l.first),g(l=f())&&(i._reorderIndicatorUpIconTemplate=l.first),g(l=f())&&(i._reorderIndicatorDownIconTemplate=l.first),g(l=f())&&(i._sortIconTemplate=l.first),g(l=f())&&(i._checkboxIconTemplate=l.first),g(l=f())&&(i._headerCheckboxIconTemplate=l.first),g(l=f())&&(i._togglerIconTemplate=l.first),g(l=f())&&(i._paginatorFirstPageLinkIconTemplate=l.first),g(l=f())&&(i._paginatorLastPageLinkIconTemplate=l.first),g(l=f())&&(i._paginatorPreviousPageLinkIconTemplate=l.first),g(l=f())&&(i._paginatorNextPageLinkIconTemplate=l.first),g(l=f())&&(i._loaderTemplate=l.first),g(l=f())&&(i.templates=l)}},viewQuery:function(t,i){if(t&1&&(k(Co,5),k(wo,5),k(So,5),k(xo,5),k(Io,5),k(Eo,5)),t&2){let r;g(r=f())&&(i.resizeHelperViewChild=r.first),g(r=f())&&(i.reorderIndicatorUpViewChild=r.first),g(r=f())&&(i.reorderIndicatorDownViewChild=r.first),g(r=f())&&(i.tableViewChild=r.first),g(r=f())&&(i.scrollableViewChild=r.first),g(r=f())&&(i.scrollableFrozenViewChild=r.first)}},hostVars:4,hostBindings:function(t,i){t&2&&(D("data-p",i.dataP)("data-scrollselectors",".p-treetable-scrollable-body"),_(i.cn(i.cx("root"),i.styleClass)))},inputs:{columns:"columns",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",autoLayout:[2,"autoLayout","autoLayout",M],lazy:[2,"lazy","lazy",M],lazyLoadOnInit:[2,"lazyLoadOnInit","lazyLoadOnInit",M],paginator:[2,"paginator","paginator",M],rows:[2,"rows","rows",me],first:[2,"first","first",me],pageLinks:[2,"pageLinks","pageLinks",me],rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:[2,"alwaysShowPaginator","alwaysShowPaginator",M],paginatorPosition:"paginatorPosition",paginatorStyleClass:"paginatorStyleClass",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:[2,"showCurrentPageReport","showCurrentPageReport",M],showJumpToPageDropdown:[2,"showJumpToPageDropdown","showJumpToPageDropdown",M],showFirstLastIcon:[2,"showFirstLastIcon","showFirstLastIcon",M],showPageLinks:[2,"showPageLinks","showPageLinks",M],defaultSortOrder:[2,"defaultSortOrder","defaultSortOrder",me],sortMode:"sortMode",resetPageOnSort:[2,"resetPageOnSort","resetPageOnSort",M],customSort:[2,"customSort","customSort",M],selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:[2,"metaKeySelection","metaKeySelection",M],compareSelectionBy:"compareSelectionBy",rowHover:[2,"rowHover","rowHover",M],loading:[2,"loading","loading",M],loadingIcon:"loadingIcon",showLoader:[2,"showLoader","showLoader",M],scrollable:[2,"scrollable","scrollable",M],scrollHeight:"scrollHeight",virtualScroll:[2,"virtualScroll","virtualScroll",M],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",me],virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:[2,"virtualScrollDelay","virtualScrollDelay",me],frozenWidth:"frozenWidth",frozenColumns:"frozenColumns",resizableColumns:[2,"resizableColumns","resizableColumns",M],columnResizeMode:"columnResizeMode",reorderableColumns:[2,"reorderableColumns","reorderableColumns",M],contextMenu:"contextMenu",rowTrackBy:"rowTrackBy",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:[2,"filterDelay","filterDelay",me],filterMode:"filterMode",filterLocale:"filterLocale",paginatorLocale:"paginatorLocale",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",value:"value",virtualRowHeight:"virtualRowHeight",selectionKeys:"selectionKeys",showGridlines:[2,"showGridlines","showGridlines",M]},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onFilter:"onFilter",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onPage:"onPage",onSort:"onSort",onLazyLoad:"onLazyLoad",sortFunction:"sortFunction",onColResize:"onColResize",onColReorder:"onColReorder",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onContextMenuSelect:"onContextMenuSelect",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",selectionKeysChange:"selectionKeysChange"},standalone:!1,features:[De([st,re,{provide:vr,useExisting:o},{provide:mi,useExisting:o}]),Je([X]),be],decls:10,vars:10,consts:[["table",""],["scrollableView",""],["scrollableFrozenView",""],["resizeHelper",""],["reorderIndicatorUp",""],["reorderIndicatorDown",""],[3,"pBind","class",4,"ngIf"],[3,"pt","rows","first","totalRecords","pageLinkSize","styleClass","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","appendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","locale","unstyled","onPageChange",4,"ngIf"],[3,"pBind","class","display",4,"ngIf"],[3,"pBind"],[3,"class",4,"ngIf"],[4,"ngIf"],["data-p-icon","spinner",3,"spin","class",4,"ngIf"],["data-p-icon","spinner",3,"spin"],[4,"ngTemplateOutlet"],[3,"onPageChange","pt","rows","first","totalRecords","pageLinkSize","styleClass","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","appendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","locale","unstyled"],["pTemplate","firstpagelinkicon"],["pTemplate","previouspagelinkicon"],["pTemplate","lastpagelinkicon"],["pTemplate","nextpagelinkicon"],["role","treegrid",3,"pBind","ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","rowgroup",3,"pBind"],["role","rowgroup",3,"pBind","unstyled","pTreeTableBody","pTreeTableBodyTemplate"],[3,"ngClass","ttScrollableView","unstyled","frozen","ngStyle","scrollHeight","pBind",4,"ngIf"],[3,"pBind","ttScrollableView","unstyled","frozen","scrollHeight","ngStyle"],[3,"ngClass","ttScrollableView","unstyled","frozen","ngStyle","scrollHeight","pBind"],["data-p-icon","arrow-down",4,"ngIf"],["data-p-icon","arrow-down"],["data-p-icon","arrow-up",4,"ngIf"],["data-p-icon","arrow-up"]],template:function(t,i){t&1&&p(0,Vo,3,5,"div",6)(1,Oo,2,4,"div",6)(2,Xo,5,23,"p-paginator",7)(3,on,9,30,"div",6)(4,rn,4,15,"div",6)(5,yn,5,23,"p-paginator",7)(6,Tn,2,4,"div",6)(7,vn,2,5,"div",8)(8,xn,4,7,"span",8)(9,Dn,4,7,"span",8),t&2&&(a("ngIf",i.loading&&i.showLoader),d(),a("ngIf",i.captionTemplate||i._captionTemplate),d(),a("ngIf",i.paginator&&(i.paginatorPosition==="top"||i.paginatorPosition=="both")),d(),a("ngIf",!i.scrollable),d(),a("ngIf",i.scrollable),d(),a("ngIf",i.paginator&&(i.paginatorPosition==="bottom"||i.paginatorPosition=="both")),d(),a("ngIf",i.summaryTemplate||i._summaryTemplate),d(),a("ngIf",i.resizableColumns),d(),a("ngIf",i.reorderableColumns),d(),a("ngIf",i.reorderableColumns))},dependencies:()=>[_t,Ae,_e,Tt,Si,ze,kt,Et,Mt,X,Cr,Vi],encapsulation:2})}return o})(),Vi=(()=>{class o extends ve{tt;treeTableService;columns;template;frozen;serializedNodes;scrollerOptions;subscription;constructor(e,t){super(),this.tt=e,this.treeTableService=t,this.subscription=this.tt.tableService.uiUpdateSource$.subscribe(()=>{this.tt.virtualScroll&&this.cd.detectChanges()})}getScrollerOption(e,t){return this.tt.virtualScroll?(t=t||this.scrollerOptions,t?t[e]:null):null}getRowIndex(e){let t=this.getScrollerOption("getItemOptions");return t?t(e).index:e}onDestroy(){this.subscription&&this.subscription.unsubscribe()}get dataP(){return this.cn({hoverable:this.tt.rowHover||this.tt.selectionMode,frozen:this.frozen})}static \u0275fac=function(t){return new(t||o)(J(ge),J(st))};static \u0275cmp=G({type:o,selectors:[["","pTreeTableBody",""]],hostVars:1,hostBindings:function(t,i){t&2&&D("data-p",i.dataP)},inputs:{columns:[0,"pTreeTableBody","columns"],template:[0,"pTreeTableBodyTemplate","template"],frozen:[2,"frozen","frozen",M],serializedNodes:"serializedNodes",scrollerOptions:"scrollerOptions"},standalone:!1,features:[be],attrs:Rn,decls:2,vars:3,consts:[["ngFor","",3,"ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){t&1&&p(0,Pn,1,1,"ng-template",0)(1,Vn,2,5,"ng-container",1),t&2&&(a("ngForOf",i.serializedNodes||i.tt.serializedValue)("ngForTrackBy",i.tt.rowTrackBy),d(),a("ngIf",i.tt.isEmpty()))},dependencies:[ei,Ae,_e],encapsulation:2})}return o})(),Cr=(()=>{class o extends ve{tt;zone;hostName="TreeTable";columns;frozen;scrollHeaderViewChild;scrollHeaderBoxViewChild;scrollBodyViewChild;scrollTableViewChild;scrollLoadingTableViewChild;scrollFooterViewChild;scrollFooterBoxViewChild;scrollableAlignerViewChild;scroller;headerScrollListener;bodyScrollListener;footerScrollListener;frozenSiblingBody;totalRecordsSubscription;_scrollHeight;preventBodyScrollPropagation;_componentStyle=b(re);get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e,e!=null&&(e.includes("%")||e.includes("calc"))&&console.log('Percentage scroll height calculation is removed in favor of the more performant CSS based flex mode, use scrollHeight="flex" instead.')}constructor(e,t){super(),this.tt=e,this.zone=t}onAfterViewInit(){if(Xe(this.platformId)){if(this.frozen)this.scrollableAlignerViewChild&&this.scrollableAlignerViewChild.nativeElement&&(this.scrollableAlignerViewChild.nativeElement.style.height=ni()+"px");else{(this.tt.frozenColumns||this.tt.frozenBodyTemplate||this.tt._frozenBodyTemplate)&&ti(this.el.nativeElement,"p-treetable-unfrozen-view");let e=this.el.nativeElement.previousElementSibling;if(e&&(this.tt.virtualScroll?this.frozenSiblingBody=V(e,'[data-pc-name="virtualscroller"]'):this.frozenSiblingBody=V(e,'[data-pc-section="scrollablebody"]')),this.scrollHeight){let t=vt();this.scrollHeaderBoxViewChild?.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.paddingRight=t+"px"),this.scrollFooterBoxViewChild&&this.scrollFooterBoxViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.paddingRight=t+"px")}}this.bindEvents()}}bindEvents(){Xe(this.platformId)&&this.zone.runOutsideAngular(()=>{this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.headerScrollListener=this.renderer.listen(this.scrollHeaderBoxViewChild?.nativeElement,"scroll",this.onHeaderScroll.bind(this))),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.footerScrollListener=this.renderer.listen(this.scrollFooterViewChild.nativeElement,"scroll",this.onFooterScroll.bind(this))),this.frozen||(this.tt.virtualScroll?this.bodyScrollListener=this.renderer.listen((this.scroller?.getElementRef()).nativeElement,"scroll",this.onBodyScroll.bind(this)):this.bodyScrollListener=this.renderer.listen(this.scrollBodyViewChild?.nativeElement,"scroll",this.onBodyScroll.bind(this)))})}unbindEvents(){Xe(this.platformId)&&(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&this.headerScrollListener&&(this.headerScrollListener(),this.headerScrollListener=null),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&this.footerScrollListener&&(this.footerScrollListener(),this.footerScrollListener=null),this.scrollBodyViewChild&&this.scrollBodyViewChild.nativeElement&&this.bodyScrollListener&&(this.bodyScrollListener(),this.bodyScrollListener=null),this.scroller&&this.scroller.getElementRef()&&this.bodyScrollListener&&(this.bodyScrollListener(),this.bodyScrollListener=null))}onHeaderScroll(){let e=this.scrollHeaderViewChild?.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onFooterScroll(){let e=this.scrollFooterViewChild?.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onBodyScroll(e){if(this.preventBodyScrollPropagation){this.preventBodyScrollPropagation=!1;return}this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.frozenSiblingBody&&(this.frozenSiblingBody.scrollTop=e.target.scrollTop)}scrollToVirtualIndex(e){this.scroller&&this.scroller.scrollToIndex(e)}scrollTo(e){this.scroller?this.scroller.scrollTo(e):this.scrollBodyViewChild?.nativeElement.scrollTo?this.scrollBodyViewChild.nativeElement.scrollTo(e):(this.scrollBodyViewChild.nativeElement.scrollLeft=e.left,this.scrollBodyViewChild.nativeElement.scrollTop=e.top)}onDestroy(){this.unbindEvents(),this.frozenSiblingBody=null}static \u0275fac=function(t){return new(t||o)(J(ge),J(Ve))};static \u0275cmp=G({type:o,selectors:[["","ttScrollableView",""]],viewQuery:function(t,i){if(t&1&&(k(Bn,5),k(On,5),k(An,5),k(Hn,5),k(Gn,5),k(Kn,5),k(Un,5),k(Qn,5),k(jn,5)),t&2){let r;g(r=f())&&(i.scrollHeaderViewChild=r.first),g(r=f())&&(i.scrollHeaderBoxViewChild=r.first),g(r=f())&&(i.scrollBodyViewChild=r.first),g(r=f())&&(i.scrollTableViewChild=r.first),g(r=f())&&(i.scrollLoadingTableViewChild=r.first),g(r=f())&&(i.scrollFooterViewChild=r.first),g(r=f())&&(i.scrollFooterBoxViewChild=r.first),g(r=f())&&(i.scrollableAlignerViewChild=r.first),g(r=f())&&(i.scroller=r.first)}},inputs:{columns:[0,"ttScrollableView","columns"],frozen:[2,"frozen","frozen",M],scrollHeight:"scrollHeight"},standalone:!1,features:[De([re]),be],attrs:$n,decls:13,vars:24,consts:[["scrollHeader",""],["scrollHeaderBox",""],["buildInItems",""],["scroller",""],["content",""],["loader",""],["scrollBody",""],["scrollTable",""],["scrollableAligner",""],["scrollFooter",""],["scrollFooterBox",""],[3,"pBind"],[3,"pBind","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","rowgroup",3,"pBind"],[3,"items","styleClass","style","scrollHeight","itemSize","lazy","options","pt","onLazyLoad",4,"ngIf"],[4,"ngIf"],[3,"class","pBind",4,"ngIf"],[3,"onLazyLoad","items","styleClass","scrollHeight","itemSize","lazy","options","pt"],["role","treegrid",3,"pBind","ngClass","ngStyle"],["role","rowgroup",3,"pBind","pTreeTableBody","unstyled","pTreeTableBodyTemplate","serializedNodes","frozen"],[3,"background-color",4,"ngIf"],[3,"ngClass","ngStyle","pBind"]],template:function(t,i){t&1&&(u(0,"div",11,0)(2,"div",11,1)(4,"table",12),p(5,Xn,1,0,"ng-container",13),u(6,"thead",14),p(7,Yn,1,0,"ng-container",13),m()()()(),p(8,rr,5,12,"p-scroller",15)(9,ar,4,13,"ng-container",16)(10,cr,5,21,"ng-template",null,2,de)(12,hr,8,22,"div",17)),t&2&&(_(i.cx("scrollableHeader")),a("pBind",i.ptm("scrollableHeader")),d(2),_(i.cx("scrollableHeaderBox")),a("pBind",i.ptm("scrollableHeaderBox")),d(2),_(i.cn(i.cx("scrollableHeaderTable"),i.tt.tableStyleClass)),a("pBind",i.ptm("scrollableHeaderTable"))("ngStyle",i.tt.tableStyle),d(),a("ngTemplateOutlet",i.frozen?i.tt.frozenColGroupTemplate||i.tt._frozenColGroupTemplate||i.tt.colGroupTemplate||i.tt._colGroupTemplate:i.tt.colGroupTemplate||i.tt._colGroupTemplate)("ngTemplateOutletContext",K(20,ce,i.columns)),d(),_(i.cx("thead")),a("pBind",i.ptm("thead")),d(),a("ngTemplateOutlet",i.frozen?i.tt.frozenHeaderTemplate||i.tt._frozenHeaderTemplate||i.tt.headerTemplate||i.tt._headerTemplate:i.tt.headerTemplate||i.tt._headerTemplate)("ngTemplateOutletContext",K(22,ce,i.columns)),d(),a("ngIf",i.tt.virtualScroll),d(),a("ngIf",!i.tt.virtualScroll),d(3),a("ngIf",i.tt.footerTemplate||i.tt._footerTemplate))},dependencies:()=>[_t,Ae,_e,Tt,zt,X,Vi],encapsulation:2})}return o})();var Bi=(()=>{class o extends ve{tt;tableService;rowNode;ttSelectableRowDisabled;selected;subscription;_componentStyle=b(re);constructor(e,t){super(),this.tt=e,this.tableService=t,this.isEnabled()&&(this.subscription=this.tt.tableService.selectionSource$.subscribe(()=>{this.selected=this.tt.isSelected(this.rowNode.node)}))}onInit(){this.isEnabled()&&(this.selected=this.tt.isSelected(this.rowNode.node))}onClick(e){this.isEnabled()&&this.tt.handleRowClick({originalEvent:e,rowNode:this.rowNode})}onKeyDown(e){switch(e.code){case"Enter":case"Space":this.onEnterKey(e);break;default:break}}onTouchEnd(e){this.isEnabled()&&this.tt.handleRowTouchEnd(e)}onEnterKey(e){this.tt.selectionMode==="checkbox"?this.tt.toggleNodeWithCheckbox({originalEvent:e,rowNode:this.rowNode}):this.onClick(e),e.preventDefault()}isEnabled(){return this.ttSelectableRowDisabled!==!0}onDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||o)(J(ge),J(st))};static \u0275dir=ht({type:o,selectors:[["","ttSelectableRow",""]],hostVars:3,hostBindings:function(t,i){t&1&&E("click",function(l){return i.onClick(l)})("keydown",function(l){return i.onKeyDown(l)})("touchend",function(l){return i.onTouchEnd(l)}),t&2&&(D("aria-selected",i.selected),_(i.cx("row")))},inputs:{rowNode:[0,"ttSelectableRow","rowNode"],ttSelectableRowDisabled:[2,"ttSelectableRowDisabled","ttSelectableRowDisabled",M]},standalone:!1,features:[De([re]),be]})}return o})();var Oi=(()=>{class o extends ve{tt;el;zone;hostName="TreeTable";bindDirectiveInstance=b(X,{self:!0});treeTable=b(ge);onAfterViewChecked(){this.bindDirectiveInstance.setAttrs(this.ptm("row",this.ptmOptions()))}get level(){return this.rowNode?.level+1}get styleClass(){return this.rowNode?.node.styleClass||""}get expanded(){return this.rowNode?.node.expanded}rowNode;_componentStyle=b(re);constructor(e,t,i){super(),this.tt=e,this.el=t,this.zone=i}onKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowRight":this.onArrowRightKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"Tab":this.onTabKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;default:break}}onArrowDownKey(e){let t=this.el?.nativeElement?.nextElementSibling;t&&this.focusRowChange(e.currentTarget,t),e.preventDefault()}onArrowUpKey(e){let t=this.el?.nativeElement?.previousElementSibling;t&&this.focusRowChange(e.currentTarget,t),e.preventDefault()}onArrowRightKey(e){let t=e.currentTarget;!(V(t,"button").style.visibility==="hidden")&&!this.expanded&&this.rowNode.node.children&&(this.expand(e),t.tabIndex=-1),e.preventDefault()}onArrowLeftKey(e){let t=this.tt.el?.nativeElement,i=ke(t,'[aria-expanded="true"]'),r=i[i.length-1];this.expanded&&this.collapse(e),r&&(this.tt.toggleRowIndex=He(r)),this.restoreFocus(),e.preventDefault()}onHomeKey(e){let t=V(this.tt.el?.nativeElement,`tr[aria-level="${this.level}"]`);t&&tt(t),e.preventDefault()}onEndKey(e){let t=ke(this.tt.el?.nativeElement,`tr[aria-level="${this.level}"]`),i=t[t.length-1];tt(i),e.preventDefault()}onTabKey(e){let t=this.el.nativeElement?[...ke(this.el.nativeElement.parentNode,"tr")]:void 0;if(t&&si(t)){let i=t.some(r=>Ct(r,"data-p-highlight")||r.getAttribute("aria-selected")==="true");if(t.forEach(r=>{r.tabIndex=-1}),i){let r=t.filter(l=>Ct(l,"data-p-highlight")||l.getAttribute("aria-selected")==="true");r[0].tabIndex=0;return}t[0].tabIndex=0}}expand(e){this.tt.toggleRowIndex=He(this.el.nativeElement),this.rowNode.node.expanded=!0,this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),this.rowNode.node.children?this.restoreFocus(this.tt.toggleRowIndex+1):this.restoreFocus(),this.tt.onNodeExpand.emit({originalEvent:e,node:this.rowNode.node})}collapse(e){this.rowNode.node.expanded=!1,this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),this.tt.onNodeCollapse.emit({originalEvent:e,node:this.rowNode.node})}focusRowChange(e,t,i){e.tabIndex="-1",t.tabIndex="0",tt(t)}restoreFocus(e){this.zone.runOutsideAngular(()=>{setTimeout(()=>{let t=this.tt.el?.nativeElement,r=V(t,'[data-pc-section="tbody"]')?.children?.[e||this.tt.toggleRowIndex||0],l=[...ke(t,"tr")];l&&l.forEach(s=>{r&&!r.isSameNode(s)&&(s.tabIndex=-1)}),r&&(r.tabIndex=0,r.focus())},25)})}ptmOptions(){return{context:{selectable:this.treeTable?.rowHover||this.treeTable.selectionMode==="row",selected:this.treeTable.isSelected(this.rowNode?.node),scrollable:this.treeTable?.scrollable,rowNode:this.rowNode}}}static \u0275fac=function(t){return new(t||o)(J(ge),J(Ht),J(Ve))};static \u0275dir=ht({type:o,selectors:[["","ttRow",""]],hostAttrs:["role","row"],hostVars:5,hostBindings:function(t,i){t&1&&E("keydown",function(l){return i.onKeyDown(l)}),t&2&&(Qt("tabIndex","0"),D("aria-expanded",i.expanded)("aria-level",i.level),_("p-element "+i.styleClass))},inputs:{rowNode:[0,"ttRow","rowNode"]},standalone:!1,features:[De([re]),Je([X]),be]})}return o})(),Ai=(()=>{class o extends ve{tt;hostName="TreeTable";bindDirectiveInstance=b(X,{self:!0});onAfterViewChecked(){this.bindDirectiveInstance.setAttrs(this.ptm("toggler"))}rowNode;_componentStyle=b(re);constructor(e){super(),this.tt=e}get toggleButtonAriaLabel(){return this.config.translation?this.rowNode.expanded?this.config.translation?.aria?.collapseRow:this.config.translation?.aria?.expandRow:void 0}onClick(e){this.rowNode.node.expanded=!this.rowNode.node.expanded,this.rowNode.node.expanded?this.tt.onNodeExpand.emit({originalEvent:e,node:this.rowNode.node}):this.tt.onNodeCollapse.emit({originalEvent:e,node:this.rowNode.node}),this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),e.preventDefault()}static \u0275fac=function(t){return new(t||o)(J(ge))};static \u0275cmp=G({type:o,selectors:[["p-treeTableToggler"],["p-treetabletoggler"],["p-treetable-toggler"]],inputs:{rowNode:"rowNode"},standalone:!1,features:[De([re]),Je([X]),be],decls:3,vars:14,consts:[["type","button","tabindex","-1","pRipple","",3,"click","pBind"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-p-icon","chevron-down",3,"pBind",4,"ngIf"],["data-p-icon","chevron-right",3,"pBind",4,"ngIf"],["data-p-icon","chevron-down",3,"pBind"],["data-p-icon","chevron-right",3,"pBind"]],template:function(t,i){t&1&&(u(0,"button",0),E("click",function(l){return i.onClick(l)}),p(1,fr,3,2,"ng-container",1)(2,yr,1,0,null,2),m()),t&2&&(_(i.cx("toggler")),Me("visibility",i.rowNode.node.leaf===!1||i.rowNode.node.children&&i.rowNode.node.children.length?"visible":"hidden")("margin-inline-start",i.rowNode.level*16+"px"),a("pBind",i.ptm("rowToggleButton")),D("data-pc-group-section","rowactionbutton")("aria-label",i.toggleButtonAriaLabel),d(),a("ngIf",!i.tt.togglerIconTemplate&&!i.tt._togglerIconTemplate),d(),a("ngTemplateOutlet",i.tt.togglerIconTemplate||i.tt._togglerIconTemplate)("ngTemplateOutletContext",K(12,ce,i.rowNode.node.expanded)))},dependencies:()=>[Ae,_e,vi,Dt,Rt,X],encapsulation:2})}return o})(),Hi=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=Gt({type:o});static \u0275inj=Ot({imports:[Re,xi,zt,kt,Et,Mt,yi,Ti,_i,fi,bi,Dt,Rt,Ii,xt,ot,gi,xt]})}return o})();var Sr=["tt"],xr=(o,n,e)=>({$implicit:o,rowData:n,field:e});function Ir(o,n){if(o&1&&(u(0,"th",6),O(1),m()),o&2){let e=n.$implicit;d(),te(" ",e.header," ")}}function Er(o,n){if(o&1&&(u(0,"tr"),gt(1,Ir,2,1,"th",6,mt),m()),o&2){let e=n.$implicit;d(),ft(e)}}function Mr(o,n){if(o&1&&A(0,"p-treeTableToggler",8),o&2){let e=h(2).$implicit;a("rowNode",e)}}function Dr(o,n){if(o&1&&S(0,9),o&2){let e=h().$implicit,t=h().rowData;a("ngTemplateOutlet",e.template)("ngTemplateOutletContext",Xt(2,xr,t,t,e.field))}}function Rr(o,n){if(o&1&&O(0),o&2){let e=h(2).$implicit,t=h().rowData;te(" ",e.valueGetter(t)," ")}}function kr(o,n){if(o&1&&O(0),o&2){let e=h(2).$implicit,t=h().rowData;te(" ",t[e.field]," ")}}function zr(o,n){if(o&1&&(ae(0),ue(1,Rr,1,1)(2,kr,1,1),se()),o&2){let e=h().$implicit;d(),he(e!=null&&e.valueGetter?1:2)}}function Nr(o,n){if(o&1&&(u(0,"td"),ue(1,Mr,1,1,"p-treeTableToggler",8),ue(2,Dr,1,6,"ng-container",9)(3,zr,3,1,"ng-container"),m()),o&2){let e=n.$implicit,t=n.$index;d(),he(t===0?1:-1),d(),he(e.type==="template"?2:3)}}function Fr(o,n){if(o&1&&(u(0,"tr",7),gt(1,Nr,4,2,"td",null,mt),m()),o&2){let e=n.$implicit,t=n.columns;a("ttRow",e)("ttSelectableRow",e),d(),ft(t)}}function Pr(o,n){if(o&1&&(u(0,"tr")(1,"td"),O(2),m()()),o&2){let e=h();d(),D("colspan",e.columns().length),d(),Ze(e.emptyMessage())}}function Lr(o,n){if(o&1&&(u(0,"tr")(1,"td")(2,"div",10),O(3," Loading data... "),m()()()),o&2){let e=n.columns;d(),D("colspan",e.length)}}var Ue=class o{treeTable;nodes=R([]);columns=R([]);selectionMode=R("single");loading=R(!1);emptyMessage=R("No data available");styleClass=R("");selection=R(null);paginator=R(!1);rows=R(Te);rowsPerPageOptions=R(ui);totalRecords=R(0);lazy=R(!1);scrollable=R(!1);scrollHeight=R("");resizableColumns=R(!0);reorderableColumns=R(!0);rowHover=R(!0);filterMode=R("menu");nodeSelect=Z();nodeUnselect=Z();nodeExpand=Z();nodeCollapse=Z();lazyLoad=Z();pageChange=Z();sort=Z();filter=Z();onNodeSelect(n){this.nodeSelect.emit(n)}onNodeUnselect(n){this.nodeUnselect.emit(n)}onNodeExpand(n){this.nodeExpand.emit(n)}onNodeCollapse(n){this.nodeCollapse.emit(n)}onLazyLoad(n){this.lazyLoad.emit(n)}onPageChange(n){this.pageChange.emit(n)}onSortChange(n){this.sort.emit(n)}onFilter(n){this.filter.emit(n)}reset(){y(this.treeTable)&&this.treeTable.reset()}setSelection(n){y(this.treeTable)&&(this.treeTable.selection=n)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=G({type:o,selectors:[["app-tree-table"]],viewQuery:function(e,t){if(e&1&&k(Sr,5),e&2){let i;g(i=f())&&(t.treeTable=i.first)}},inputs:{nodes:[1,"nodes"],columns:[1,"columns"],selectionMode:[1,"selectionMode"],loading:[1,"loading"],emptyMessage:[1,"emptyMessage"],styleClass:[1,"styleClass"],selection:[1,"selection"],paginator:[1,"paginator"],rows:[1,"rows"],rowsPerPageOptions:[1,"rowsPerPageOptions"],totalRecords:[1,"totalRecords"],lazy:[1,"lazy"],scrollable:[1,"scrollable"],scrollHeight:[1,"scrollHeight"],resizableColumns:[1,"resizableColumns"],reorderableColumns:[1,"reorderableColumns"],rowHover:[1,"rowHover"],filterMode:[1,"filterMode"]},outputs:{nodeSelect:"nodeSelect",nodeUnselect:"nodeUnselect",nodeExpand:"nodeExpand",nodeCollapse:"nodeCollapse",lazyLoad:"lazyLoad",pageChange:"pageChange",sort:"sort",filter:"filter"},decls:10,vars:16,consts:[["tt",""],["header",""],["body",""],["emptymessage",""],["loadingbody",""],[3,"onNodeSelect","onNodeUnselect","onNodeExpand","onNodeCollapse","onLazyLoad","onPage","onSort","onFilter","value","columns","selectionMode","selection","loading","paginator","rows","rowsPerPageOptions","totalRecords","lazy","scrollable","scrollHeight","resizableColumns","reorderableColumns","rowHover","filterMode"],["scope","col"],[3,"ttRow","ttSelectableRow"],[3,"rowNode"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","justify-content-center","align-items-center"]],template:function(e,t){if(e&1){let i=ee();u(0,"p-treeTable",5,0),E("onNodeSelect",function(l){return P(i),L(t.onNodeSelect(l))})("onNodeUnselect",function(l){return P(i),L(t.onNodeUnselect(l))})("onNodeExpand",function(l){return P(i),L(t.onNodeExpand(l))})("onNodeCollapse",function(l){return P(i),L(t.onNodeCollapse(l))})("onLazyLoad",function(l){return P(i),L(t.onLazyLoad(l))})("onPage",function(l){return P(i),L(t.onPageChange(l))})("onSort",function(l){return P(i),L(t.onSortChange(l))})("onFilter",function(l){return P(i),L(t.onFilter(l))}),p(2,Er,3,0,"ng-template",null,1,de)(4,Fr,3,2,"ng-template",null,2,de)(6,Pr,3,2,"ng-template",null,3,de)(8,Lr,4,1,"ng-template",null,4,de),m()}e&2&&a("value",t.nodes())("columns",t.columns())("selectionMode",t.selectionMode())("selection",t.selection())("loading",t.loading())("paginator",t.paginator())("rows",t.rows())("rowsPerPageOptions",t.rowsPerPageOptions())("totalRecords",t.totalRecords())("lazy",t.lazy())("scrollable",t.scrollable())("scrollHeight",t.scrollHeight())("resizableColumns",t.resizableColumns())("reorderableColumns",t.reorderableColumns())("rowHover",t.rowHover())("filterMode",t.filterMode())},dependencies:[Re,_e,Hi,ge,Ai,Oi,Bi,ki],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})};var Gi=class o{treeTable;treeTableConfigFactory=b(Ni);activatedRoute=b(et);destroyRef=b(We);currentTreeTableState=w(void 0);filterSubject=new j;broadcastService=b(it);detailsFactory=b(nt);detailsService=b(rt);treeTableConfiguration=w(null);columns=w([]);nodes=w([]);loading=w(!1);totalRecords=w(0);limit=w(Te);showFilters=w(!1);currentFilters=w({});router=b(B);forceTreeReconfig$=new j;lastProcessedRouteKey=w(null);constructor(){pe(()=>{let n=this.treeTableConfiguration();y(n?.columnsSignal)&&this.columns.set(n.columnsSignal())}),pe(()=>{let n=this.nodes(),e=this.activatedRoute.snapshot.queryParams;if(n.length>0&&y(e.details)){let t=e.details,i=this.findNodeById(n,t);i&&this.treeTable&&setTimeout(()=>{this.treeTable?.setSelection(i),this.handleNodeSelect({node:i})})}})}ngOnInit(){this.initializeTreeTableConfiguration(),this.initializeFilterDebounce(),this.initializeEntityUpdatesHandler(),this.initializeClientChangeHandler(),this.initializeQueryParamSelection(),this.forceTreeReconfig$.next()}initializeQueryParamSelection(){this.activatedRoute.queryParams.pipe(x(this.destroyRef),W(n=>{if(this.nodes().length>0&&y(n.details)){let e=n.details,t=this.findNodeById(this.nodes(),e);t&&this.treeTable&&setTimeout(()=>{this.treeTable?.setSelection(t),this.handleNodeSelect({node:t})})}})).subscribe()}findNodeById(n,e){for(let t of n){if(t.data?.id===e)return t;if(t.children&&t.children.length>0){let i=this.findNodeById(t.children,e);if(i)return i}}return null}initializeEntityUpdatesHandler(){this.broadcastService.on("entity-updated").pipe(x(this.destroyRef)).subscribe(()=>{let n=null;this.treeTable?.selection&&(n=Array.isArray(this.treeTable.selection)?[...this.treeTable.selection]:Q({},this.treeTable.selection)),this.loadData(this.currentTreeTableState()).pipe(x(this.destroyRef)).subscribe(()=>{n&&this.restoreSelection(Array.isArray(n)?n[0]:n)})})}initializeClientChangeHandler(){let n=xe(this.broadcastService.on("client-changed"),this.broadcastService.on("entity-changed")),e=this.broadcastService.on("entity-deleted");n.pipe(x(this.destroyRef),le(100)).subscribe(()=>{this.forceTreeReconfig$.next()}),e.pipe(x(this.destroyRef),le(100)).subscribe(()=>{this.onRefresh()})}restoreSelection(n){if(!(ie(n)||!this.treeTable)){if(this.nodes().length===0){console.warn("Cannot restore selection: tree table data is empty");return}try{if(Array.isArray(n)){let e=n.map(i=>i.data?.id),t=[];for(let i of e){let r=this.findNodeById(this.nodes(),i);r&&t.push(r)}t.length>0&&setTimeout(()=>{this.treeTable?.setSelection(t),y(t[0])&&this.handleNodeSelect({node:t[0]})},100)}else if(y(n?.data?.id)){let e=this.findNodeById(this.nodes(),n.data.id);e?setTimeout(()=>{this.treeTable?.setSelection(e),this.handleNodeSelect({node:e})},100):console.warn(`Node with id ${n.data.id} not found in refreshed data`)}}catch(e){console.error("Error restoring selection:",e)}}}getRouteParams(){let n=this.activatedRoute,e=[];for(;n;)e.push(n.snapshot.params),n=n.parent;let t={};for(let i=e.length-1;i>=0;i--)Object.assign(t,e[i]);return t}initializeTreeTableConfiguration(){let n=this.router.events.pipe($e(t=>t instanceof Ye),fe(()=>!1)),e=this.forceTreeReconfig$.pipe(fe(()=>!0));xe(n,e).pipe(x(this.destroyRef),Ie(()=>{this.loading.set(!0);let t=this.activatedRoute.snapshot.paramMap.get("type")??this.activatedRoute.snapshot.data.gridType,i=this.getRouteParams(),r=i.clientId??i.vendorId??i.distributorId??"none",l=`${t}-${r}`;if(this.lastProcessedRouteKey()===l)return this.loading.set(!1),N;if(this.lastProcessedRouteKey.set(l),ie(t))return this.treeTableConfiguration.set(null),this.columns.set([]),this.currentFilters.set({}),this.loading.set(!1),N;let s=this.treeTableConfigFactory.create(t,i);if(!this.isValidConfig(s))return console.warn(`AdminTreetableContainer: Generated configuration for type "${t??"derived_from_path"}" (key: ${l}) is invalid.`),this.treeTableConfiguration.set(null),this.columns.set([]),this.currentFilters.set({}),this.loading.set(!1),N;if(this.treeTableConfiguration.set(s),y(s.columns)&&this.columns.set(s.columns),y(s.getFilters)){let c=s.getFilters(),T={};for(let[v,z]of Object.entries(c))y(z)&&typeof z=="object"&&(T[v]=z.value);this.currentFilters.set(T)}else this.currentFilters.set({});return this.loadData()}),Y(t=>(console.error("AdminTreetableContainer: Error during treetable configuration or data load pipeline:",t),this.loading.set(!1),this.nodes.set([]),this.totalRecords.set(0),this.treeTableConfiguration.set(null),this.columns.set([]),this.currentFilters.set({}),N))).subscribe()}isValidConfig(n){return n?.dataService?!0:(this.loading.set(!1),!1)}initializeFilterDebounce(){this.filterSubject.pipe(x(this.destroyRef),le(300),W(n=>{let e=this.treeTableConfiguration();e&&(e.onFilterChange?.(n.field,n.value),this.loadData(this.currentTreeTableState()).subscribe(()=>{}))})).subscribe()}loadData(n){return Se(()=>{let e=this.treeTableConfiguration();return this.isValidConfig(e)?(this.loading.set(!0),this.currentTreeTableState.set(n),e.dataService.getList(e.getRequestParams(n)).pipe(x(this.destroyRef),qe(()=>this.loading.set(!1)),W(t=>{this.nodes.set(t.nodes),this.totalRecords.set(t.count)}),Y(()=>N))):N})}onRefresh(){let n=this.treeTableConfiguration();if(!this.isValidConfig(n))return;let e=this.detailsService.showPanel(),t=this.detailsService.getSelectedItemId();this.loadData(this.currentTreeTableState()).pipe(x(this.destroyRef),W(()=>{if(e&&t){let i=this.findItemById(t);y(i)?this.detailsService.softRefreshSelectedItem(i):this.detailsService.softRefreshSelectedItem()}})).subscribe()}onFilterToggle(){let n=this.treeTableConfiguration();if(!this.treeTable||!n)return;let e=!this.showFilters();if(this.showFilters.set(e),e){if(n.getFilters){let t=n.getFilters(),i={};for(let[r,l]of Object.entries(t))y(l)&&typeof l=="object"&&(i[r]=l.value);this.currentFilters.set(i)}}else n.clearFilters&&(n.clearFilters(),this.loadData().pipe(x(this.destroyRef)).subscribe())}handleLazyLoad(n){this.loadData(n).pipe(x(this.destroyRef),Y(()=>N)).subscribe()}handleNodeSelect(n){if(oe(n)||oe(n?.node))return;let e=this.detailsFactory.getEntityTypeFromRoute(this.activatedRoute,"type"),t=n?.node?.data?.type??e,i=we(Q({},n?.node?.data),{entityType:t});this.broadcastService.broadcast("tree-item-selected",{item:i,componentType:this.detailsFactory.getDetailsComponent(t)})}handleNodeExpand(n){let e=this.treeTableConfiguration();!e?.onNodeExpand||oe(n)||oe(n.node)||e.onNodeExpand(n.node)}handleNodeCollapse(n){let e=this.treeTableConfiguration();!e?.onNodeCollapse||oe(n)||oe(n.node)||e.onNodeCollapse(n.node)}findItemById(n){let e=this.nodes();return ie(e)?null:this.searchNodeRecursively(e,n)}searchNodeRecursively(n,e){for(let t of n){if(String(t.data?.id)===e)return t.data;if(t.children&&t.children.length>0){let i=this.searchNodeRecursively(t.children,e);if(i)return i}}return null}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=G({type:o,selectors:[["app-admin-treetable-container"]],viewQuery:function(e,t){if(e&1&&k(Ue,5),e&2){let i;g(i=f())&&(t.treeTable=i.first)}},decls:12,vars:15,consts:[[1,"flex","flex-col","h-full","w-full","overflow-hidden"],[1,"p-4","content-header","flex-none","w-full"],[1,"flex","justify-between","items-center"],["id","treetableTitle",1,"text-xl","font-semibold","truncate"],["aria-label","Tree Table actions",1,"flex-none","flex","space-x-4","align-center"],["type","button","pTooltip","Add","tooltipPosition","bottom","aria-label","Add new item",1,"pi","pi-plus","action","hover",3,"click"],["type","button","pTooltip","Refresh","tooltipPosition","bottom","aria-label","Refresh tree table data",1,"pi","pi-refresh","action","hover",3,"click"],[1,"flex-1","min-h-0","w-full","overflow-auto"],["role","treegrid",1,"h-full","max-w-full",3,"lazyLoad","nodeSelect","nodeExpand","nodeCollapse","columns","nodes","totalRecords","lazy","selectionMode","loading","scrollable","scrollHeight"],["aria-live","polite","aria-atomic","true",1,"sr-only"]],template:function(e,t){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),O(4),m(),u(5,"div",4)(6,"button",5),E("click",function(){let r;return(r=t.treeTableConfiguration())==null?null:r.onAdd()}),m(),u(7,"button",6),E("click",function(){return t.onRefresh()}),m()()()(),u(8,"div",7)(9,"app-tree-table",8),E("lazyLoad",function(r){return t.handleLazyLoad(r)})("nodeSelect",function(r){return t.handleNodeSelect(r)})("nodeExpand",function(r){return t.handleNodeExpand(r)})("nodeCollapse",function(r){return t.handleNodeCollapse(r)}),m()(),u(10,"div",9),O(11),m()()),e&2){let i,r;d(4),te(" ",(i=t.treeTableConfiguration())==null?null:i.getTitle()," "),d(2),D("aria-disabled",!((r=t.treeTableConfiguration())!=null&&r.onAdd)),d(),D("aria-busy",t.loading()),d(2),a("columns",t.columns())("nodes",t.nodes())("totalRecords",t.totalRecords())("lazy",!0)("selectionMode","single")("loading",t.loading())("scrollable",!0)("scrollHeight","flex"),D("aria-labelledby","treetableTitle")("aria-busy",t.loading())("aria-rowcount",t.totalRecords()),d(2),te(" ",t.loading()?"Loading data":t.totalRecords()+" items loaded"," ")}},dependencies:[Ue,Ne,Pe,Fe],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}[_nghost-%COMP%]   .content-header[_ngcontent-%COMP%]{background-color:var(--surface-card);border-bottom:1px solid var(--surface-border)}[_nghost-%COMP%]   .action[_ngcontent-%COMP%]{font-size:1.2rem;padding:.5rem;border-radius:50%;cursor:pointer;transition:all .2s ease}[_nghost-%COMP%]   .action.hover[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover)}[_nghost-%COMP%]   .action[aria-disabled=true][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}"],changeDetection:0})};export{Gr as a,Wr as b,tl as c,al as d,hl as e,_l as f,xl as g,Pi as h,Gi as i};
