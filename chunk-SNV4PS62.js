import{b as m}from"./chunk-SPEMODBD.js";import{e as te,g as oe,h as o,i as c}from"./chunk-MSZXHJ7G.js";import"./chunk-YBD64TFN.js";import{a as ee}from"./chunk-5MHRBT53.js";import{a as ne}from"./chunk-PQZ2WFRV.js";import"./chunk-2MGCTFZV.js";import{a}from"./chunk-QMOL74MI.js";import{a as $}from"./chunk-SJDVASYZ.js";import"./chunk-XGZWX4PW.js";import"./chunk-KAPCDYJA.js";import"./chunk-ZDWK5NB6.js";import"./chunk-2YP72RBM.js";import"./chunk-RCAL2UNJ.js";import"./chunk-FNP4CVQN.js";import"./chunk-QVSLGYTS.js";import"./chunk-QJYXX6WB.js";import"./chunk-JJVUWK2A.js";import"./chunk-JHHTYGX5.js";import"./chunk-FVFSV3SV.js";import"./chunk-YPVSUJNA.js";import"./chunk-UJGTUYJO.js";import"./chunk-GVCBKH6U.js";import"./chunk-PHOSYVDR.js";import"./chunk-UUBV4PLA.js";import"./chunk-T2ASJLBG.js";import"./chunk-K3QSXHYQ.js";import"./chunk-L7NFYEY5.js";import"./chunk-BEAFDC2I.js";import"./chunk-53JQ5NAG.js";import"./chunk-GV42Z4ED.js";import"./chunk-SDMJKPKX.js";import"./chunk-HBFOC76W.js";import"./chunk-MI5GPO5K.js";import"./chunk-PH5YALHE.js";import"./chunk-6C6CC4KT.js";import"./chunk-JAXNIEKX.js";import{$c as y,J as L,K as J,L as K,M as h,Pc as Z,Q as W,S as X,T as Y,bd as C}from"./chunk-FEC2V4R3.js";import{D as R,Jb as x,Kb as N,Pb as M,Qb as p,Rb as f,Sb as b,Vc as z,Ya as v,Zb as O,Zc as j,ba as l,bc as F,cc as G,gc as U,gd as H,ha as _,hc as k,ia as V,ic as q,mb as P,na as D,oc as B,r as S,rc as u,sb as E,sc as Q,ta as I,va as w}from"./chunk-EG5ORV3B.js";import{a as T,b as A}from"./chunk-VB56BUGO.js";var r=async s=>{let n=l(y),e=l(h),t=s.paramMap.get("type");if(X(t)||!(t in a))return!0;let i=a[t],d="permissions"in i?i.permissions:void 0;return n.canAccess(d,"vendor")?!0:(await e.navigate(["/unauthorized"],{queryParams:{requiredPermission:JSON.stringify(d??"no_permission")}}),!1)};var re=["main"];function ie(s,n){if(s&1&&(p(0,"div",2),b(1,"i",5),p(2,"strong"),u(3,"QA Test Mode:"),f(),u(4," Currently simulating permissions for "),p(5,"strong"),u(6),f()()),s&2){let e=G();v(6),Q(e.qaTools.activeProfileName())}}function ae(s,n){s&1&&b(0,"router-outlet")}var g=class s{mainTemplate;qaTools=l($);baseVendorTabs=[{id:"details",label:"Details",route:"details",level:0},{id:"clients",label:"Clients",route:"clients",level:0},{id:"alerts",label:"Alerts",route:"alerts",level:0},{id:"providers",label:"Providers",level:0,children:[{id:"vendor-email-providers",label:"Email Providers",route:"providers/vendor-email-providers",level:1},{id:"vendor-sms-gateway-providers",label:"SMS Gateways",route:"providers/vendor-sms-gateway-providers",level:1}]},{id:"profiles",label:"Profiles",level:0,children:[{id:"vendor-company-groups",label:"Company Groups",route:"profiles/tree/vendor-company-groups",level:1},{id:"vendor-io-types",label:"IO Types",route:"profiles/grid/vendor-io-types",level:1},{id:"vendor-device-config-profiles",label:"Device Config Profiles",route:"profiles/grid/vendor-device-config-profiles",level:1},{id:"vendor-overspeed-profiles",label:"Overspeed Profiles",route:"profiles/grid/vendor-overspeed-profiles",level:1},{id:"vendor-road-profiles",label:"Road Profiles",route:"profiles/grid/vendor-road-profiles",level:1},{id:"vendor-geo-lock-profiles",label:"Geo Lock Profiles",route:"profiles/grid/vendor-geo-lock-profiles",level:1},{id:"vendor-custom-fields",label:"Custom Fields",route:"profiles/grid/vendor-custom-fields",level:1},{id:"vendor-themes",label:"Themes",route:"profiles/grid/vendor-themes",level:1}]},{id:"accounts",label:"Accounts",level:0,children:[{id:"vendor-users",label:"Users",route:"accounts/vendor-users",level:1},{id:"vendor-user-roles",label:"User Roles",route:"accounts/vendor-user-roles",level:1}]}];vendorTabs=j(()=>this.filterTabsByPermissions(this.baseVendorTabs));detailsService=l(ee);cdr=l(H);permissionService=l(y);router=l(h);activatedRoute=l(J);destroyRef=l(D);isContentScrollable=I(!1);constructor(){w(()=>{this.qaTools.activePersona()})}get contentScrollableActive(){return!this.isContentScrollable()}ngAfterViewInit(){this.applyTemplateToTabs(this.baseVendorTabs,this.mainTemplate),this.cdr.detectChanges()}applyTemplateToTabs(n,e){for(let t of n)t.template=e,t.children&&this.applyTemplateToTabs(t.children,e)}onTabChange(){this.detailsService.closeDetailsPanel()}ngOnInit(){let n=e=>{let t=e;for(;t.firstChild;)t=t.firstChild;let i=t.snapshot.data;return Y(i)&&typeof i.nestedContentScrollable=="boolean"?i.nestedContentScrollable:!1};this.isContentScrollable.set(n(this.activatedRoute)),this.cdr.detectChanges(),this.router.events.pipe(R(e=>e instanceof L),S(()=>n(this.activatedRoute)),Z(this.destroyRef)).subscribe(e=>{this.isContentScrollable()!==e&&(this.isContentScrollable.set(e),this.cdr.detectChanges())})}filterTabsByPermissions(n){return n.map(e=>{let t=a[e.id];if(!this.permissionService.canAccess("permissions"in t?t.permissions:void 0))return null;if(e.children!==void 0&&e.children.length>0){let d=this.filterTabsByPermissions(e.children);return d.length===0?null:A(T({},e),{children:d})}return e}).filter(e=>e!==null)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=P({type:s,selectors:[["app-vendor-container"]],viewQuery:function(e,t){if(e&1&&U(re,5),e&2){let i;k(i=q())&&(t.mainTemplate=i.first)}},hostAttrs:[1,"!flex","!flex-col","!h-full","!w-full","!overflow-hidden"],hostVars:2,hostBindings:function(e,t){e&2&&B("content-scrollable-inactive",t.contentScrollableActive)},decls:6,vars:2,consts:[["main",""],[1,"w-full","h-full","flex","flex-col"],[1,"px-4","py-2","bg-orange-100","border-l-4","border-orange-500","text-orange-800","text-sm"],[1,"flex-1","overflow-hidden"],["styleClass","h-full overflow-hidden",3,"tabChange","tabs"],[1,"pi","pi-info-circle","mr-2"]],template:function(e,t){if(e&1){let i=O();p(0,"div",1),x(1,ie,7,1,"div",2),p(2,"div",3)(3,"app-dynamic-tab-panel",4),F("tabChange",function(){return _(i),V(t.onTabChange())}),f()()(),E(4,ae,1,0,"ng-template",null,0,z)}e&2&&(v(),N(t.qaTools.testMode()?1:-1),v(2),M("tabs",t.vendorTabs()))},dependencies:[ne,W,K],encapsulation:2})};var Le=[{path:"",component:g,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"accounts",children:[{path:"",canActivate:[m("vendor","accounts",["vendor-users","vendor-user-roles"],"vendor",a)],component:o},{path:":type",canActivate:[r],component:o},{path:":type/:entityType/:entityId",canActivate:[r],component:o}]},{path:"details",loadChildren:()=>import("./chunk-2WZH4NNQ.js").then(s=>s.ADMIN_VENDOR_DETAILS_ROUTES),data:{nestedContentScrollable:!0}},{path:"hardware",children:[{path:"",canActivate:[m("vendor","hardware",["vendor-hardware-devices"],"vendor",a)],component:o},{path:":type",canActivate:[r],component:o},{path:":type/:entityType/:entityId",canActivate:[r],component:o}]},{path:"organization",children:[{path:"",canActivate:[m("vendor","organization",["vendor-cost-centres"],"vendor",a)],component:c},{path:":type",canActivate:[r],component:c},{path:":type/:entityType/:entityId",canActivate:[r],component:c}]},{path:"profiles",children:[{path:"",canActivate:[m("vendor","profiles",["vendor-company-groups","vendor-io-types","vendor-device-config-profiles","vendor-overspeed-profiles","vendor-road-profiles","vendor-geo-lock-profiles","vendor-custom-fields"],"vendor",a)],component:o},{path:"tree",children:[{path:":type",canActivate:[r],component:c},{path:":type/:entityType/:entityId",canActivate:[r],component:c}]},{path:"grid",children:[{path:":type",canActivate:[r],component:o},{path:":type/:entityType/:entityId",canActivate:[r],component:o}]}]},{path:"providers",children:[{path:"",canActivate:[m("vendor","providers",["vendor-email-providers","vendor-sms-gateway-providers"],"vendor",a)],component:o},{path:":type",canActivate:[r],component:o},{path:":type/:entityType/:entityId",canActivate:[r],component:o}]},...C("clients",te,o,a.clients.permissions,void 0,"grid/:type","vendor"),...C("alerts",oe,o,void 0,void 0,"grid/:type","vendor")]}];export{Le as ADMIN_VENDORS_ROUTES};
