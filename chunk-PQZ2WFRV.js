import{a as X,b as Y,c as Z,f as ee}from"./chunk-L7NFYEY5.js";import{J as z,K,M as G,N as H,O as J,Pc as O,Q,S as W,T as d,U as b,X as _,e as j,l as q}from"./chunk-FEC2V4R3.js";import{D as L,Db as w,Hc as h,Ic as f,Jb as T,Kb as v,Lb as M,Nb as C,Ob as y,Pb as c,Qb as p,Rb as s,Sb as E,Vc as U,Ya as l,Yb as x,Zb as k,ad as B,ba as g,bc as D,bd as P,cc as r,ha as u,ia as m,mb as S,mc as F,na as R,qc as V,rc as A,sb as N,ta as $,tc as I}from"./chunk-EG5ORV3B.js";var ne=a=>[a],ie=()=>[],ae=()=>({exact:!0}),oe=a=>({$implicit:a}),re=(a,t)=>t.id;function le(a,t){if(a&1){let e=k();p(0,"p-tab",8),D("click",function(){let n=u(e).$implicit,o=r();return m(o.onTabChange(n))})("keydown.enter",function(){let n=u(e).$implicit,o=r();return m(o.onTabChange(n))}),x(1,9),s()}if(a&2){let e=t.$implicit,i=r(),n=F(9);c("value",e.id)("disabled",e==null?null:e.disabled)("routerLink",i.getTabPath(e)?f(8,ne,i.getTabPath(e)):h(10,ie))("routerLinkActiveOptions",h(11,ae)),w("aria-label",e.label)("role","tab"),l(),c("ngTemplateOutlet",n)("ngTemplateOutletContext",f(12,oe,e))}}function ce(a,t){if(a&1){let e=k();p(0,"p-tab",8),D("click",function(){let n=u(e).$implicit,o=r(3);return m(o.onTabChange(n))})("keydown.enter",function(){let n=u(e).$implicit,o=r(3);return m(o.onTabChange(n))}),x(1,9),s()}if(a&2){let e=t.$implicit,i=r(3),n=F(9);c("value",e.id)("disabled",e==null?null:e.disabled)("routerLink",i.getTabPath(e)?f(8,ne,i.getTabPath(e)):h(10,ie))("routerLinkActiveOptions",h(11,ae)),w("aria-label",e.label)("role","tab"),l(),c("ngTemplateOutlet",n)("ngTemplateOutletContext",f(12,oe,e))}}function se(a,t){if(a&1&&(p(0,"p-tabs",10)(1,"p-tablist"),C(2,ce,2,14,"p-tab",4,re),s()()),a&2){let e,i=r().$index,n=r();c("value",n.activeTabPath()[i])("scrollable",!0),l(2),y((e=n.getActiveTabAtLevel(n.tabs(),i-1))==null?null:e.children)}}function pe(a,t){if(a&1&&T(0,se,4,2,"p-tabs",10),a&2){let e,i=t.$index,n=r();v(i>0&&(!((e=n.getActiveTabAtLevel(n.tabs(),i-1))==null||e.children==null)&&e.children.length)?0:-1)}}function de(a,t){if(a&1&&E(0,"i",12),a&2){let e=r().$implicit;V(e.icon)}}function be(a,t){if(a&1&&(T(0,de,1,2,"i",11),A(1)),a&2){let e=t.$implicit;v(e.icon?0:-1),l(),I(" ",e.label," ")}}function ue(a,t){if(a&1&&x(0,6),a&2){let e=r();c("ngTemplateOutlet",e.getFinalActiveTab().template)}}function me(a,t){a&1&&(p(0,"div",7),A(1," Select a tab to view content or no content template defined. "),s())}var te=class a{tabs=P([]);baseRoute=P("");contentScrollable=P(!1);tabChange=B();router=g(G);route=g(K);destroyRef=g(R);tabCache=new Map;activeTabPath=$([]);ngOnInit(){this.router.events.pipe(L(t=>t instanceof z),O(this.destroyRef)).subscribe(async()=>{await this.updateActiveTabFromUrl()}),this.route.params.pipe(O(this.destroyRef)).subscribe(async()=>{await this.updateActiveTabFromUrl()})}buildPathFromUrl(){let t=this.router.url.split("/").filter(n=>n!==""),e=[],i=this.tabs();for(let n of t){let o=this.findTabByRoute(i,n);d(o)&&(e.push(o.id),i=_(o.children)?o.children:[])}return e}async handleDefaultNavigation(t){if(t.length>0||!_(this.tabs())||this.tabs().length===0)return t;let e=this.tabs()[0];return!d(e)||!b(e.id)||(t.push(e.id),await this.navigateToDefaultTab(e)),t}async navigateToDefaultTab(t){if(_(t.children)&&t.children.length>0){let e=t.children[0];d(e)&&b(e.id)&&await this.router.navigate([this.getTabPath(t),this.getTabPath(e)])}else await this.router.navigate([this.getTabPath(t)])}async updateActiveTabFromUrl(){let t=this.buildPathFromUrl(),e=await this.handleDefaultNavigation(t);this.activeTabPath.set(e)}findTabByRoute(t,e){let i=`${e}`;if(this.tabCache.has(i))return this.tabCache.get(i);let n=t.find(o=>o.route===e||o.id===e);return n&&this.tabCache.set(i,n),n}getTabPath(t){if(W(t))throw new Error("Tab configuration is required");return b(t.route)?t.route:t.id}getActiveTabAtLevel(t,e){let i=this.activeTabPath()[e];return t.find(n=>n.id===i)}getFinalActiveTab(){let t=this.tabs(),e;for(let i of this.activeTabPath())if(e=t.find(n=>n.id===i),e?.children)t=e.children;else break;return e}updateActiveTabPath(t,e){if(!d(t)||!b(t.id))return this.activeTabPath();let i=[...this.activeTabPath().slice(0,e),t.id];if(_(t.children)&&t.children.length>0){let n=t.children[0];d(n)&&b(n.id)&&i.push(n.id)}return i}onTabChange(t){this.tabChange.emit(t);let e=this.updateActiveTabPath(t,t.level);this.activeTabPath.set(e)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-dynamic-tab-panel"]],inputs:{tabs:[1,"tabs"],baseRoute:[1,"baseRoute"],contentScrollable:[1,"contentScrollable"]},outputs:{tabChange:"tabChange"},decls:13,vars:4,consts:[["tabContent",""],[1,"flex","flex-col","h-full","w-full","overflow-hidden"],[1,"flex-shrink-0","sticky","top-0","z-50"],["role","tablist",3,"value","scrollable"],["routerLinkActive","p-highlight",3,"value","disabled","routerLink","routerLinkActiveOptions"],["role","tabpanel",1,"flex-grow","min-h-0","flex","flex-col",3,"ngClass"],[3,"ngTemplateOutlet"],[1,"p-4","text-center"],["routerLinkActive","p-highlight",3,"click","keydown.enter","value","disabled","routerLink","routerLinkActiveOptions"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tablist",1,"nested-tabs",3,"value","scrollable"],["aria-hidden","true",3,"class"],["aria-hidden","true"]],template:function(e,i){if(e&1&&(p(0,"div",1)(1,"div",2)(2,"p-tabs",3)(3,"p-tablist"),C(4,le,2,14,"p-tab",4,re),s()(),C(6,pe,1,1,null,null,M),s(),N(8,be,2,2,"ng-template",null,0,U),p(10,"div",5),T(11,ue,1,1,"ng-container",6)(12,me,2,0,"div",7),s()()),e&2){let n;l(2),c("value",i.activeTabPath()[0])("scrollable",!0),l(2),y(i.tabs()),l(2),y(i.activeTabPath()),l(4),c("ngClass",i.contentScrollable()?"overflow-y-auto":"overflow-hidden"),l(),v((n=i.getFinalActiveTab())!=null&&n.template?11:12)}},dependencies:[ee,X,Y,Z,Q,H,J,q,j],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow:hidden}"]})};export{te as a};
