import{e as k,f as T,z as w}from"./chunk-GVCBKH6U.js";import{l as R,m as L}from"./chunk-6C6CC4KT.js";import{S as M,T as l,u as A}from"./chunk-FEC2V4R3.js";import{Jb as f,Kb as c,Nb as F,Ob as g,Pb as p,Qb as r,Rb as s,Ya as a,Zb as v,ba as m,bc as u,cc as n,ha as h,ia as C,mb as y,rc as x,tc as D,va as b}from"./chunk-EG5ORV3B.js";function S(t,i){if(t&1&&(r(0,"p",1),x(1),s()),t&2){let e=n();a(),D(" ",e._subHeader," ")}}function E(t,i){if(t&1){let e=v();r(0,"p-button",5),u("onClick",function(){h(e);let _=n().$implicit,d=n();return C(d.handleAction(_))}),s()}if(t&2){let e=n().$implicit,o=n();p("label",e.label)("icon",e.icon)("styleClass",e.styleClass)("severity",e.severity)("disabled",o.isDisabled(e))}}function H(t,i){if(t&1&&f(0,E,1,5,"p-button",4),t&2){let e=i.$implicit,o=n();c(o.isVisible(e)?0:-1)}}var V=class t{_fields=[];_fieldsFn;_initialData={};_actions=[];_subHeader="";form;dialogRef=m(T);dialogConfig=m(k);constructor(){if(l(this.dialogConfig?.data)){let i=this.dialogConfig.data.fieldsFn;typeof i=="function"?(this._fieldsFn=i,this._fields=this._fieldsFn()??[],b(()=>{if(this._fieldsFn){let e=this._fieldsFn();Array.isArray(e)&&e!==this._fields&&(this._fields=[...e])}})):this._fields=this.dialogConfig.data.fields??[],this._initialData=this.dialogConfig.data.initialData??{},this._actions=this.dialogConfig.data.actions??[],this._subHeader=this.dialogConfig.data.subHeader??""}else this.dialogRef.close()}handleFormReady(i){this.form=i,l(this._initialData)&&l(this.form)&&this.form.patchValue(this._initialData,{emitEvent:!1})}isVisible(i){return typeof i.visible=="function"?i.visible(this.form):i.visible??!0}isDisabled(i){return typeof i.disabled=="function"?i.disabled(this.form):i.type==="submit"&&this.form?(i.disabled??!1)||this.form.invalid:i.disabled??!1}handleAction(i){if(i.action&&this.form){if(i.type==="submit"&&this.form.invalid){this.form.markAllAsTouched();return}i.action(this.form);return}this.form&&i.type==="submit"?this.form.valid?this.dialogRef.close(this.form.getRawValue()):this.form.markAllAsTouched():(i.type==="cancel"||M(this.form))&&this.dialogRef.close()}trackByLabel(i,e){return e.label??`action-${i}`}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-modal-list-form"]],decls:6,vars:3,consts:[[1,"modal-list-form-content","p-fluid","p-3"],[1,"mb-4"],[3,"formReady","fields","hideActions"],[1,"modal-list-form-footer","flex","justify-end","gap-2","p-3","border-t","border-surface-border"],[3,"label","icon","styleClass","severity","disabled"],[3,"onClick","label","icon","styleClass","severity","disabled"]],template:function(e,o){e&1&&(r(0,"div",0),f(1,S,2,1,"p",1),r(2,"app-dynamic-form",2),u("formReady",function(d){return o.handleFormReady(d)}),s()(),r(3,"div",3),F(4,H,1,1,null,null,o.trackByLabel,!0),s()),e&2&&(a(),c(o._subHeader?1:-1),a(),p("fields",o._fields)("hideActions",!0),a(2),g(o._actions))},dependencies:[A,L,R,w],encapsulation:2,changeDetection:0})};export{V as a};
