import{b as ce}from"./chunk-HWRGEG3G.js";import"./chunk-ZDWK5NB6.js";import{C as ie,D as oe,N as ae,P as re,W as _,X as b}from"./chunk-2YP72RBM.js";import"./chunk-RCAL2UNJ.js";import"./chunk-FNP4CVQN.js";import"./chunk-QVSLGYTS.js";import"./chunk-QJYXX6WB.js";import"./chunk-JJVUWK2A.js";import"./chunk-JHHTYGX5.js";import{a as X,b as Z,c as ee,d as te,e as ne}from"./chunk-FVFSV3SV.js";import"./chunk-YPVSUJNA.js";import"./chunk-UJGTUYJO.js";import"./chunk-GVCBKH6U.js";import"./chunk-PHOSYVDR.js";import"./chunk-UUBV4PLA.js";import"./chunk-T2ASJLBG.js";import"./chunk-K3QSXHYQ.js";import"./chunk-L7NFYEY5.js";import"./chunk-BEAFDC2I.js";import"./chunk-53JQ5NAG.js";import"./chunk-GV42Z4ED.js";import"./chunk-SDMJKPKX.js";import"./chunk-HBFOC76W.js";import{a as K,b as Q}from"./chunk-MI5GPO5K.js";import"./chunk-PH5YALHE.js";import"./chunk-6C6CC4KT.js";import"./chunk-JAXNIEKX.js";import{Db as H,K as j,Pc as $,S as F,T as M,Wc as G,Z as q,_c as J,ca as Y,f as B,sb as I,u as W}from"./chunk-FEC2V4R3.js";import{F as w,Jb as s,Kb as d,Nb as S,Ob as h,Pb as v,Qb as r,Rb as a,S as P,Sb as C,U as T,Ya as o,Yb as D,Zc as x,ba as u,cc as p,h as R,i as A,j as E,k as N,mb as k,na as L,rc as f,s as U,sb as g,sc as z,ta as m}from"./chunk-EG5ORV3B.js";import{a as O}from"./chunk-VB56BUGO.js";var y=(t,e)=>e.id;function se(t,e){t&1&&(r(0,"div",1),C(1,"p-progressSpinner"),a())}function de(t,e){if(t&1&&(r(0,"div",2)(1,"p",4),f(2),a()()),t&2){let n=p();o(2),z(n.error())}}function le(t,e){t&1&&D(0)}function pe(t,e){t&1&&C(0,"p-divider")}function me(t,e){if(t&1&&(g(0,le,1,0,"ng-container",12),s(1,pe,1,0,"p-divider")),t&2){let n=e.$implicit,i=e.$index,c=e.$count,l=p(2);v("ngComponentOutlet",n.component)("ngComponentOutletInputs",l.getSectionInputs(n)),o(),d(i!==c-1?1:-1)}}function _e(t,e){t&1&&D(0)}function ue(t,e){t&1&&C(0,"p-divider")}function Ce(t,e){if(t&1&&(g(0,_e,1,0,"ng-container",12),s(1,ue,1,0,"p-divider")),t&2){let n=e.$implicit,i=e.$index,c=e.$count,l=p(3);v("ngComponentOutlet",n.component)("ngComponentOutletInputs",l.getSectionInputs(n)),o(),d(i!==c-1?1:-1)}}function fe(t,e){if(t&1&&(r(0,"p-accordion-panel",7)(1,"p-accordion-header")(2,"span",6),f(3,"Settings"),a()(),r(4,"p-accordion-content"),S(5,Ce,2,3,null,null,y),a()()),t&2){let n=p(2);o(5),h(n.settingsSections())}}function ge(t,e){t&1&&D(0)}function Se(t,e){t&1&&C(0,"p-divider")}function he(t,e){if(t&1&&(g(0,ge,1,0,"ng-container",12),s(1,Se,1,0,"p-divider")),t&2){let n=e.$implicit,i=e.$index,c=e.$count,l=p(3);v("ngComponentOutlet",n.component)("ngComponentOutletInputs",l.getSectionInputs(n)),o(),d(i!==c-1?1:-1)}}function ve(t,e){if(t&1&&(r(0,"p-accordion-panel",8)(1,"p-accordion-header")(2,"span",6),f(3,"Limits"),a()(),r(4,"p-accordion-content"),S(5,he,2,3,null,null,y),a()()),t&2){let n=p(2);o(5),h(n.limitsSections())}}function De(t,e){t&1&&D(0)}function xe(t,e){t&1&&C(0,"p-divider")}function ye(t,e){if(t&1&&(g(0,De,1,0,"ng-container",12),s(1,xe,1,0,"p-divider")),t&2){let n=e.$implicit,i=e.$index,c=e.$count,l=p(3);v("ngComponentOutlet",n.component)("ngComponentOutletInputs",l.getSectionInputs(n)),o(),d(i!==c-1?1:-1)}}function Ve(t,e){if(t&1&&(r(0,"p-accordion-panel",9)(1,"p-accordion-header")(2,"span",6),f(3,"Statistics"),a()(),r(4,"p-accordion-content"),S(5,ye,2,3,null,null,y),a()()),t&2){let n=p(2);o(5),h(n.statisticsSections())}}function Ee(t,e){t&1&&D(0)}function Te(t,e){t&1&&C(0,"p-divider")}function Fe(t,e){if(t&1&&(g(0,Ee,1,0,"ng-container",12),s(1,Te,1,0,"p-divider")),t&2){let n=e.$implicit,i=e.$index,c=e.$count,l=p(3);v("ngComponentOutlet",n.component)("ngComponentOutletInputs",l.getSectionInputs(n)),o(),d(i!==c-1?1:-1)}}function Me(t,e){if(t&1&&(r(0,"p-accordion-panel",10)(1,"p-accordion-header")(2,"span",6),f(3,"Features"),a()(),r(4,"p-accordion-content"),S(5,Fe,2,3,null,null,y),a()()),t&2){let n=p(2);o(5),h(n.featuresSections())}}function Ie(t,e){t&1&&D(0)}function $e(t,e){t&1&&C(0,"p-divider")}function be(t,e){if(t&1&&(g(0,Ie,1,0,"ng-container",12),s(1,$e,1,0,"p-divider")),t&2){let n=e.$implicit,i=e.$index,c=e.$count,l=p(3);v("ngComponentOutlet",n.component)("ngComponentOutletInputs",l.getSectionInputs(n)),o(),d(i!==c-1?1:-1)}}function Oe(t,e){if(t&1&&(r(0,"p-accordion-panel",11)(1,"p-accordion-header")(2,"span",6),f(3,"Changes"),a()(),r(4,"p-accordion-content"),S(5,be,2,3,null,null,y),a()()),t&2){let n=p(2);o(5),h(n.changesSections())}}function Re(t,e){if(t&1&&(r(0,"div",3)(1,"p-accordion",5)(2,"p-accordion-panel",5)(3,"p-accordion-header")(4,"span",6),f(5,"Information"),a()(),r(6,"p-accordion-content"),S(7,me,2,3,null,null,y),a()(),s(9,fe,7,0,"p-accordion-panel",7),s(10,ve,7,0,"p-accordion-panel",8),s(11,Ve,7,0,"p-accordion-panel",9),s(12,Me,7,0,"p-accordion-panel",10),s(13,Oe,7,0,"p-accordion-panel",11),a()()),t&2){let n=p();o(7),h(n.informationSections()),o(2),d(n.hasSettingsSections()?9:-1),o(),d(n.hasLimitsSections()?10:-1),o(),d(n.hasStatisticsSections()?11:-1),o(),d(n.hasFeaturesSections()?12:-1),o(),d(n.hasChangesSections()?13:-1)}}var V=class t{broadcastService=u(G);authDataService=u(J);operationRegistry=u(re);accountsService=u(Y);informationSections=m([]);settingsSections=m([]);featuresSections=m([]);limitsSections=m([]);statisticsSections=m([]);changesSections=m([]);loading=m(!0);entity=m(null);error=m(null);hasInformationSections=x(()=>this.informationSections().length>0);hasSettingsSections=x(()=>this.settingsSections().length>0);hasFeaturesSections=x(()=>this.featuresSections().length>0);hasLimitsSections=x(()=>this.limitsSections().length>0);hasStatisticsSections=x(()=>this.statisticsSections().length>0);hasChangesSections=x(()=>this.changesSections().length>0);dataStrategy=u(ce);destroyRef=u(L);route=u(j);constructor(){this.operationRegistry.registerEntityOperations("vendor",{update:(e,n)=>this.accountsService.updateVendor(e,n),create:e=>this.accountsService.createVendor(e),get:e=>this.accountsService.getVendor(e)})}isEntityUpdatedMessage(e){return M(e)&&e!==null&&typeof e=="object"&&"entityType"in e&&"data"in e&&e.entityType==="vendor"}ngOnInit(){this.initializeEntityData(),this.broadcastService.on("entity-updated").pipe($(this.destroyRef)).subscribe(e=>{this.isEntityUpdatedMessage(e)&&(this.entity.set(e.data),this.updateSectionsWithEntityData())})}initializeEntityData(){U([this.route.paramMap,this.route.parent?.parent?.data??E({})]).pipe($(this.destroyRef),T(()=>{this.loading.set(!0),this.setupSectionStructure()}),P(([e,n])=>{let i=e.get("vendorId")??n.vendor?.id;return M(i)?A(this.dataStrategy.fetchById(i)):q(n.vendor)?N(()=>new Error("Vendor ID not found")):E(n.vendor)}),w(()=>(this.error.set("Failed to load vendor data"),R)),T(e=>{this.entity.set(e),this.loading.set(!1),this.updateSectionsWithEntityData()})).subscribe()}setupSectionStructure(){this.informationSections.set(_.createVendorInformationSections(null));let e=this.authDataService.getUserProfile()?.owner?.id===I;if(this.settingsSections.set(_.createVendorSettingsSections(null)),e&&this.limitsSections.set(_.createVendorLimitsSections(null)),this.authDataService.getUserProfile()?.owner?.type!=="client"){let i=["page-moreapps"].flatMap(c=>_.forVendor(null).addSection(c,"Features",b).build());this.featuresSections.set(i)}}updateSectionsWithEntityData(){let e=this.entity();if(F(e))return;this.informationSections.set(_.createVendorInformationSections(e));let n=this.authDataService.getUserProfile()?.owner?.id===I;if(this.settingsSections.set(_.createVendorSettingsSections(e)),n&&this.limitsSections.set(_.createVendorLimitsSections(e)),this.authDataService.getUserProfile()?.owner?.type!=="client"){let c=["page-moreapps"].flatMap(l=>_.forVendor(e).addSection(l,"App Features",b,{category:"features"},{feature:H[l],entityType:"vendor"}).build());this.featuresSections.set(c)}this.statisticsSections.set(_.createVendorStatisticsSections(e)),this.changesSections.set([{id:"vendor-changes",title:"Changes",component:ae,componentInputs:{entity:e,entityType:"vendor"},category:"feed",order:10}])}async updateEntity(e){let n=this.entity();if(!F(n))try{this.loading.set(!0);let i=await this.dataStrategy.update(n.id,e);this.entity.set(i)}catch(i){this.error.set(`${i instanceof Error?i.message:String(i)}`)}finally{this.loading.set(!1)}}getSectionInputs(e){return O({},e.componentInputs)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=k({type:t,selectors:[["app-vendor-details-container"]],decls:4,vars:3,consts:[[1,"flex","flex-col","h-full","admin-details-container"],[1,"loading-container"],[1,"error-container"],[1,"flex","overflow-hidden","flex-col","h-full","details-container"],[1,"error-message"],["value","information"],[1,"uppercase"],["value","settings"],["value","limits"],["value","statistics"],["value","features"],["value","changes"],[4,"ngComponentOutlet","ngComponentOutletInputs"]],template:function(n,i){n&1&&(r(0,"div",0),s(1,se,2,0,"div",1),s(2,de,3,1,"div",2),s(3,Re,14,5,"div",3),a()),n&2&&(o(),d(i.loading()?1:-1),o(),d(i.error()?2:-1),o(),d(!i.loading()&&!i.error()?3:-1))},dependencies:[ne,te,X,Z,ee,oe,ie,Q,K,W,B],styles:["[_nghost-%COMP%]{display:block;height:100%}  p-accordion,   .p-accordion{display:flex!important;flex-direction:column!important;height:100%!important}  p-accordion-panel,   .p-accordionpanel{display:flex!important;flex-direction:column!important;flex:0 0 auto!important}  p-accordion-panel.p-accordionpanel-active,   p-accordion-panel.p-highlight,   .p-accordionpanel.p-accordionpanel-active,   .p-accordionpanel.p-highlight{flex:1 1 auto!important;min-height:0!important;overflow:hidden!important}  p-accordion-header,   .p-accordionheader{flex:0 0 auto!important;z-index:10}  p-accordion-content,   .p-accordioncontent{flex:1 1 auto!important;overflow-y:auto!important;height:100%!important}  p-accordion-content .p-accordioncontent-content,   .p-accordioncontent .p-accordioncontent-content{min-height:100%}"]})};var mt=[{path:"",component:V}];export{mt as ADMIN_VENDOR_DETAILS_ROUTES};
