import{a as G}from"./chunk-YFYLIULU.js";import{b as F}from"./chunk-PDXK54JZ.js";import{b as z}from"./chunk-JJVUWK2A.js";import{l as B}from"./chunk-YPVSUJNA.js";import"./chunk-UJGTUYJO.js";import"./chunk-BEAFDC2I.js";import"./chunk-53JQ5NAG.js";import"./chunk-GV42Z4ED.js";import"./chunk-SDMJKPKX.js";import"./chunk-HBFOC76W.js";import{b as q}from"./chunk-MI5GPO5K.js";import{e as P,f as V}from"./chunk-PH5YALHE.js";import{l as N,m as $}from"./chunk-6C6CC4KT.js";import"./chunk-JAXNIEKX.js";import{M as I,N as k,Q,Uc as j,u as M}from"./chunk-FEC2V4R3.js";import{F as T,Ic as v,Jb as f,Kb as C,Pb as s,Qb as o,Rb as n,Sb as a,Ta as S,Vc as _,Ya as p,Zb as L,ba as u,bc as R,cc as m,gc as x,ha as D,hc as g,ia as A,ic as h,j as b,mb as w,rc as d,sb as E,sc as y,ta as c}from"./chunk-EG5ORV3B.js";import"./chunk-VB56BUGO.js";var U=["appIconTemplate"],Y=["statusTemplate"],H=["actionsTemplate"],J=e=>["/app-store",e],K=e=>["/editor",e];function W(e,i){if(e&1){let t=L();o(0,"div",7)(1,"div",8),a(2,"i",9),n(),o(3,"h3",10),d(4),n(),o(5,"p",11),d(6,"Please try refreshing the page."),n(),o(7,"p-button",12),R("onClick",function(){D(t);let r=m();return A(r.reload())}),n()()}if(e&2){let t=m();p(4),y(t.error())}}function X(e,i){if(e&1&&a(0,"app-grid",13),e&2){let t=m(2);s("columns",t.columns())("data",t.apps())("loading",t.isLoading())("pagination",!0)("rows",10)("sortable",!0)}}function Z(e,i){e&1&&(o(0,"div",14)(1,"div",15),a(2,"i",16),n(),o(3,"h3",17),d(4," Build Your First App "),n(),o(5,"p",18),d(6," Create custom integrations and widgets to enhance the CypherView experience for everyone. "),n(),a(7,"p-button",19),n())}function ee(e,i){if(e&1&&f(0,X,1,6,"app-grid",13)(1,Z,8,0,"div",14),e&2){let t=m();C(t.apps().length>0||t.isLoading()?0:1)}}function te(e,i){if(e&1&&(o(0,"div",20),a(1,"img",21),o(2,"span",22),d(3),n()()),e&2){let t=i.$implicit;p(),s("src",t.iconUrl,S)("alt",t.name+" icon"),p(2),y(t.name)}}function ie(e,i){if(e&1&&a(0,"app-status-badge",23),e&2){let t=i.$implicit;s("status",t.status)}}function oe(e,i){if(e&1&&a(0,"p-button",26),e&2){let t=m().$implicit;s("routerLink",v(2,K,t.id))("text",!0)}}function ne(e,i){if(e&1&&(o(0,"div",24),a(1,"p-button",25),f(2,oe,1,4,"p-button",26),n()),e&2){let t=i.$implicit;p(),s("routerLink",v(3,J,t.id))("text",!0),p(),C(t.status!=="approved"?2:-1)}}var O=class e{appStoreService=u(F);clientDataService=u(j);router=u(I);appIconTemplate;statusTemplate;actionsTemplate;isLoading=c(!0);error=c(null);apps=c([]);columns=c([]);constructor(){this.loadApps()}ngOnInit(){this.setupColumns()}setupColumns(){this.columns.set([{field:"name",header:"App",sortable:!0,cellTemplate:this.appIconTemplate},{field:"status",header:"Status",sortable:!0,cellTemplate:this.statusTemplate},{field:"installCount",header:"Installs",sortable:!0,transform:"font-mono"},{field:"averageRating",header:"Rating",sortable:!0},{field:"updatedDate",header:"Last Updated",sortable:!0,valueGetter:i=>new Date(i.updatedDate).toLocaleDateString()},{field:"actions",header:"Actions",cellTemplate:this.actionsTemplate}])}loadApps(){this.isLoading.set(!0),this.error.set(null),this.appStoreService.getMyApps({owner:this.clientDataService.getSelectedClient()?.id??""}).pipe(T(()=>(this.error.set("Unable to load your apps. Please try again."),b([])))).subscribe(i=>{this.apps.set(i),this.isLoading.set(!1)})}reload(){this.loadApps()}editApp(i){this.router.navigate(["/app-store/editor"],{queryParams:{appId:i.id},state:{appToEdit:i}}).catch(()=>{})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["app-creator-dashboard"]],viewQuery:function(t,l){if(t&1&&(x(U,7),x(Y,7),x(H,7)),t&2){let r;g(r=h())&&(l.appIconTemplate=r.first),g(r=h())&&(l.statusTemplate=r.first),g(r=h())&&(l.actionsTemplate=r.first)}},decls:12,vars:1,consts:[["appIconTemplate",""],["statusTemplate",""],["actionsTemplate",""],[1,"flex","flex-col","h-full","w-full"],[1,"px-6","pt-6","flex","justify-end","items-center","flex-none"],["routerLink","../editor","label","Create New App","icon","pi pi-plus","severity","primary"],[1,"flex-1","min-h-0","w-full","overflow-hidden","p-6"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center"],[1,"w-16","h-16","bg-surface-50","rounded-full","flex","items-center","justify-center","mb-4"],[1,"pi","pi-exclamation-triangle","text-3xl"],[1,"text-xl","font-bold","text-surface-900","mb-2"],[1,"text-surface-600"],["label","Try Again","icon","pi pi-refresh","severity","secondary",1,"mt-4",3,"onClick"],["styleClass","h-full",3,"columns","data","loading","pagination","rows","sortable"],[1,"flex","flex-col","items-center","justify-center","py-24","text-center"],[1,"w-20","h-20","bg-primary/10","rounded-full","flex","items-center","justify-center","mb-6"],[1,"pi","pi-plus","text-4xl","text-primary"],[1,"text-2xl","font-bold","text-surface-900","mb-2"],[1,"text-surface-600","max-w-md","mb-8"],["routerLink","../editor","label","Start Creating","icon","pi pi-rocket","severity","primary","size","large"],[1,"flex","items-center","gap-2"],[1,"w-8","h-8","rounded","object-cover","shadow-sm","bg-surface-100",3,"src","alt"],[1,"font-medium","text-surface-900"],[3,"status"],[1,"flex","gap-2"],["icon","pi pi-eye","size","small","severity","secondary","pTooltip","View Details",3,"routerLink","text"],["icon","pi pi-pencil","size","small","severity","secondary","pTooltip","Edit App",3,"routerLink","text"]],template:function(t,l){t&1&&(o(0,"div",3)(1,"div",4),a(2,"p-button",5),n(),o(3,"div",6),f(4,W,8,1,"div",7)(5,ee,2,1),n()(),E(6,te,4,3,"ng-template",null,0,_)(8,ie,1,1,"ng-template",null,1,_)(10,ne,3,5,"ng-template",null,2,_)),t&2&&(p(4),C(l.error()?4:5))},dependencies:[M,Q,k,$,N,z,q,V,P,B,G],styles:["[_nghost-%COMP%]{display:block}"]})};export{O as AppCreatorDashboardComponent};
