import{b as v}from"./chunk-SPEMODBD.js";import{d as te,h as a,i as T}from"./chunk-MSZXHJ7G.js";import"./chunk-YBD64TFN.js";import{a as ee}from"./chunk-5MHRBT53.js";import{a as ie}from"./chunk-PQZ2WFRV.js";import"./chunk-2MGCTFZV.js";import{a as s}from"./chunk-XTAT62VL.js";import{a as $}from"./chunk-SJDVASYZ.js";import"./chunk-XGZWX4PW.js";import"./chunk-KAPCDYJA.js";import"./chunk-ZDWK5NB6.js";import"./chunk-2YP72RBM.js";import"./chunk-RCAL2UNJ.js";import"./chunk-FNP4CVQN.js";import"./chunk-QVSLGYTS.js";import"./chunk-QJYXX6WB.js";import"./chunk-JJVUWK2A.js";import"./chunk-JHHTYGX5.js";import"./chunk-FVFSV3SV.js";import"./chunk-YPVSUJNA.js";import"./chunk-UJGTUYJO.js";import"./chunk-GVCBKH6U.js";import"./chunk-PHOSYVDR.js";import"./chunk-UUBV4PLA.js";import"./chunk-T2ASJLBG.js";import"./chunk-K3QSXHYQ.js";import"./chunk-L7NFYEY5.js";import"./chunk-BEAFDC2I.js";import"./chunk-53JQ5NAG.js";import"./chunk-GV42Z4ED.js";import"./chunk-SDMJKPKX.js";import"./chunk-HBFOC76W.js";import"./chunk-MI5GPO5K.js";import"./chunk-PH5YALHE.js";import"./chunk-6C6CC4KT.js";import"./chunk-JAXNIEKX.js";import{$c as b,J as z,K as J,L,M as f,Pc as Y,Q as K,S as W,T as X,bd as Z}from"./chunk-FEC2V4R3.js";import{D as R,Jb as E,Kb as M,Pb as N,Qb as d,Rb as c,Sb as y,Vc as k,Ya as u,Zb as U,Zc as j,ba as n,bc as F,cc as O,gc as B,gd as H,ha as S,hc as V,ia as A,ic as G,mb as x,na as I,oc as q,r as D,rc as m,sb as w,sc as Q,ta as _,va as P}from"./chunk-EG5ORV3B.js";import{a as C,b as g}from"./chunk-VB56BUGO.js";var p=async o=>{let i=n(b),e=n(f),t=o.paramMap.get("type");if(W(t)||!(t in s))return!0;let r=s[t],l="permissions"in r?r.permissions:void 0;return i.canAccess(l,"distributor")?!0:(await e.navigate(["/unauthorized"],{queryParams:{requiredPermission:JSON.stringify(l??"no_permission")}}),!1)};var re=["main"];function oe(o,i){if(o&1&&(d(0,"div",2),y(1,"i",5),d(2,"strong"),m(3,"QA Test Mode:"),c(),m(4," Currently simulating permissions for "),d(5,"strong"),m(6),c()()),o&2){let e=O();u(6),Q(e.qaTools.activeProfileName())}}function ne(o,i){o&1&&y(0,"router-outlet")}var h=class o{mainTemplate;qaTools=n($);baseDistributorTabs=[{id:"details",label:"Details",route:"details",level:0},{id:"vendors",label:"Vendors",route:"vendors",level:0},{id:"providers",label:"Providers",level:0,children:[{id:"distributor-device-providers",label:"Device Providers",route:"providers/distributor-device-providers",level:1},{id:"distributor-email-providers",label:"Email Providers",route:"providers/distributor-email-providers",level:1}]},{id:"profiles",label:"Profiles",level:0,children:[{id:"distributor-company-groups",label:"Vendor Groups",route:"profiles/distributor-company-groups",level:1},{id:"distributor-road-profiles",label:"Road Profiles",route:"profiles/distributor-road-profiles",level:1},{id:"distributor-themes",label:"Themes",route:"profiles/distributor-themes",level:1}]},{id:"accounts",label:"Accounts",level:0,children:[{id:"distributor-users",label:"Users",route:"accounts/distributor-users",level:1},{id:"distributor-user-roles",label:"User Roles",route:"accounts/distributor-user-roles",level:1}]}];distributorTabs=j(()=>this.filterTabsByPermissions(this.baseDistributorTabs));detailsService=n(ee);cdr=n(H);router=n(f);activatedRoute=n(J);destroyRef=n(I);permissionService=n(b);isContentScrollable=_(!1);constructor(){P(()=>{this.qaTools.activePersona()})}get contentScrollableActive(){return!this.isContentScrollable()}ngAfterViewInit(){this.applyTemplateToTabs(this.baseDistributorTabs,this.mainTemplate),this.cdr.detectChanges()}applyTemplateToTabs(i,e){for(let t of i)t.template=e,t.children&&this.applyTemplateToTabs(t.children,e)}onTabChange(){this.detailsService.closeDetailsPanel()}ngOnInit(){let i=e=>{let t=e;for(;t.firstChild;)t=t.firstChild;let r=t.snapshot.data;return X(r)&&typeof r.nestedContentScrollable=="boolean"?r.nestedContentScrollable:!1};this.isContentScrollable.set(i(this.activatedRoute)),this.cdr.detectChanges(),this.router.events.pipe(R(e=>e instanceof z),D(()=>i(this.activatedRoute)),Y(this.destroyRef)).subscribe(e=>{this.isContentScrollable()!==e&&(this.isContentScrollable.set(e),this.cdr.detectChanges())})}filterTabsByPermissions(i){return i.map(e=>{let t=s[e.id];if(!this.permissionService.canAccess("permissions"in t?t.permissions:void 0))return null;if(e.children!==void 0&&e.children.length>0){let l=this.filterTabsByPermissions(e.children);return l.length===0?null:g(C({},e),{children:l})}return e}).filter(e=>e!==null)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=x({type:o,selectors:[["app-distributor-container"]],viewQuery:function(e,t){if(e&1&&B(re,5),e&2){let r;V(r=G())&&(t.mainTemplate=r.first)}},hostAttrs:[1,"!flex","!flex-col","!h-full","!w-full","!overflow-hidden"],hostVars:2,hostBindings:function(e,t){e&2&&q("content-scrollable-inactive",t.contentScrollableActive)},decls:6,vars:2,consts:[["main",""],[1,"w-full","h-full","flex","flex-col"],[1,"px-4","py-2","bg-orange-100","border-l-4","border-orange-500","text-orange-800","text-sm"],[1,"flex-1","overflow-hidden"],["styleClass","h-full overflow-hidden",3,"tabChange","tabs"],[1,"pi","pi-info-circle","mr-2"]],template:function(e,t){if(e&1){let r=U();d(0,"div",1),E(1,oe,7,1,"div",2),d(2,"div",3)(3,"app-dynamic-tab-panel",4),F("tabChange",function(){return S(r),A(t.onTabChange())}),c()()(),w(4,ne,1,0,"ng-template",null,0,k)}e&2&&(u(),M(t.qaTools.testMode()?1:-1),u(2),N("tabs",t.distributorTabs()))},dependencies:[ie,K,L],encapsulation:2})};var ze=[{path:"",component:h,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",loadChildren:()=>import("./chunk-3LX4DQ4E.js").then(o=>o.ADMIN_DISTRIBUTOR_DETAILS_ROUTES),data:{nestedContentScrollable:!0}},{path:"providers",children:[{path:"",canActivate:[v("distributor","providers",["distributor-device-providers","distributor-email-providers"],"distributor",s)],component:a},{path:":type",canActivate:[p],component:a}]},{path:"profiles",children:[{path:"",canActivate:[v("distributor","profiles",["distributor-company-groups","distributor-road-profiles","distributor-themes"],"distributor",s)],component:a},{path:"distributor-company-groups",component:T,data:{type:"distributor-company-groups"}},{path:"distributor-company-groups/:entityType/:entityId",component:T,data:{type:"distributor-company-groups"}},{path:":type",canActivate:[p],component:a},{path:":type/:entityType/:entityId",canActivate:[p],component:a}]},{path:"accounts",children:[{path:"",canActivate:[v("distributor","accounts",["distributor-users","distributor-user-roles"],"distributor",s)],component:a},{path:":type",canActivate:[p],component:a},{path:":type/:entityType/:entityId",canActivate:[p],component:a}]},...Z("vendors",te,a,s.vendors.permissions,void 0,"grid/:type","distributor")]}];export{ze as ADMIN_DISTRIBUTOR_ROUTES};
