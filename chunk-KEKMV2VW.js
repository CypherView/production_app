import{a as p}from"./chunk-SPEMODBD.js";import{a as Z,b as $,c as ee,h as i,i as C}from"./chunk-MSZXHJ7G.js";import"./chunk-YBD64TFN.js";import{a as Y}from"./chunk-5MHRBT53.js";import{a as te}from"./chunk-PQZ2WFRV.js";import"./chunk-2MGCTFZV.js";import{a as X,b as g,c as s}from"./chunk-SJDVASYZ.js";import"./chunk-XGZWX4PW.js";import"./chunk-KAPCDYJA.js";import"./chunk-ZDWK5NB6.js";import"./chunk-2YP72RBM.js";import"./chunk-RCAL2UNJ.js";import"./chunk-FNP4CVQN.js";import"./chunk-QVSLGYTS.js";import"./chunk-QJYXX6WB.js";import"./chunk-JJVUWK2A.js";import"./chunk-JHHTYGX5.js";import"./chunk-FVFSV3SV.js";import"./chunk-YPVSUJNA.js";import"./chunk-UJGTUYJO.js";import"./chunk-GVCBKH6U.js";import"./chunk-PHOSYVDR.js";import"./chunk-UUBV4PLA.js";import"./chunk-T2ASJLBG.js";import"./chunk-K3QSXHYQ.js";import"./chunk-L7NFYEY5.js";import"./chunk-BEAFDC2I.js";import"./chunk-53JQ5NAG.js";import"./chunk-GV42Z4ED.js";import"./chunk-SDMJKPKX.js";import"./chunk-HBFOC76W.js";import"./chunk-MI5GPO5K.js";import"./chunk-PH5YALHE.js";import"./chunk-6C6CC4KT.js";import"./chunk-JAXNIEKX.js";import{J as H,K as j,L as J,M as v,Pc as W,T as K,bd as h}from"./chunk-FEC2V4R3.js";import{D as _,Jb as N,Kb as x,Pb as F,Qb as c,Rb as f,Sb as b,Vc as q,Ya as m,Zb as G,Zc as B,ba as l,bc as M,cc as O,gc as z,gd as Q,ha as w,hc as U,ia as I,ic as k,mb as D,na as R,oc as L,r as S,rc as u,sb as E,sc as V,ta as P}from"./chunk-EG5ORV3B.js";import{a as T,b as A}from"./chunk-VB56BUGO.js";var a=async r=>{let n=l(g),e=l(v),t=r.paramMap.get("type");if(t===null||t===""||!(t in s))return!0;let o=s[t];return"permissions"in o?n.canAccessFeature(o.permissions)?!0:(await e.navigate(["/unauthorized"],{queryParams:{requiredPermission:JSON.stringify(o.permissions)}}),!1):!0};var ie=["main"];function ne(r,n){if(r&1&&(c(0,"div",2),b(1,"i",5),c(2,"strong"),u(3,"QA Test Mode:"),f(),u(4," Currently simulating permissions for "),c(5,"strong"),u(6),f()()),r&2){let e=O();m(6),V(e.qaTools.activeProfileName())}}function oe(r,n){r&1&&b(0,"router-outlet")}var y=class r{cdr=l(Q);clientPermissionsService=l(g);qaTools=l(X);mainTemplate;baseClientTabs=[{id:"details",label:"Details",route:"details",level:0},{id:"assets",label:"Assets",route:"assets",level:0},{id:"geofences",label:"Geofences",route:"geofences",level:0},{id:"alerts",label:"Alerts",route:"alerts",level:0},{id:"hardware",label:"Hardware",level:0,children:[{id:"client-hardware-devices",label:"Devices",route:"hardware/client-hardware-devices",level:1},{id:"client-asset-tags",label:"Asset Tags",route:"hardware/client-asset-tags",level:1},{id:"client-sim-cards",label:"Sim Cards",route:"hardware/client-sim-cards",level:1}]},{id:"providers",label:"Providers",level:0,children:[{id:"client-sms-gateway-providers",label:"SMS Gateways",route:"providers/client-sms-gateway-providers",level:1}]},{id:"profiles",label:"Profiles",level:0,children:[{id:"client-io-types",label:"I/O Types",route:"profiles/client-io-types",level:1},{id:"client-device-config-profiles",label:"Device Config Profiles",route:"profiles/client-device-config-profiles",level:1},{id:"client-asset-rating-profiles",label:"Asset Rating Profiles",route:"profiles/client-asset-rating-profiles",level:1},{id:"client-asset-state-profiles",label:"Asset State Profiles",route:"profiles/client-asset-state-profiles",level:1},{id:"client-overspeed-profiles",label:"Overspeed Profiles",route:"profiles/client-overspeed-profiles",level:1},{id:"client-road-profiles",label:"Road Profiles",route:"profiles/client-road-profiles",level:1},{id:"client-geo-lock-profiles",label:"Geo Lock Profiles",route:"profiles/client-geo-lock-profiles",level:1},{id:"client-custom-fields",label:"Custom Fields",route:"profiles/client-custom-fields",level:1}]},{id:"organization",label:"Organization",level:0,children:[{id:"client-cost-centres",label:"Cost Centres",route:"organization/client-cost-centres",level:1},{id:"client-asset-groups",label:"Asset Groups",route:"organization/client-asset-groups",level:1},{id:"client-asset-categories",label:"Categories",route:"organization/client-asset-categories",level:1},{id:"client-geofence-groups",label:"Geofence Groups",route:"organization/client-geofence-groups",level:1}]},{id:"accounts",label:"Accounts",level:0,children:[{id:"client-users",label:"Users",route:"accounts/client-users",level:1},{id:"client-user-roles",label:"User Roles",route:"accounts/client-user-roles",level:1}]}];clientTabs=B(()=>this.filterTabsByPermissions(this.baseClientTabs));router=l(v);activatedRoute=l(j);destroyRef=l(R);detailsService=l(Y);isContentScrollable=P(!1);get contentScrollableActive(){return!this.isContentScrollable()}ngAfterViewInit(){this.applyTemplateToTabs(this.baseClientTabs,this.mainTemplate),this.cdr.detectChanges()}applyTemplateToTabs(n,e){for(let t of n)t.template=e,t.children!==void 0&&t.children.length>0&&this.applyTemplateToTabs(t.children,e)}filterTabsByPermissions(n){return n.map(e=>{let t=s[e.id];if(!this.clientPermissionsService.canAccessFeature("permissions"in t?t.permissions:void 0))return null;if(e.children!==void 0&&e.children.length>0){let d=this.filterTabsByPermissions(e.children);return d.length===0?null:A(T({},e),{children:d})}return e}).filter(e=>e!==null)}onTabChange(){this.detailsService.closeDetailsPanel()}ngOnInit(){let n=e=>{let t=e;for(;t.firstChild;)t=t.firstChild;let o=t.snapshot.data;return K(o)&&typeof o.nestedContentScrollable=="boolean"?o.nestedContentScrollable:!1};this.isContentScrollable.set(n(this.activatedRoute)),this.cdr.detectChanges(),this.router.events.pipe(_(e=>e instanceof H),S(()=>n(this.activatedRoute)),W(this.destroyRef)).subscribe(e=>{this.isContentScrollable()!==e&&(this.isContentScrollable.set(e),this.cdr.detectChanges())})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["app-client-container"]],viewQuery:function(e,t){if(e&1&&z(ie,5),e&2){let o;U(o=k())&&(t.mainTemplate=o.first)}},hostAttrs:[1,"!flex","!flex-col","!h-full","!w-full","!overflow-hidden"],hostVars:2,hostBindings:function(e,t){e&2&&L("content-scrollable-inactive",t.contentScrollableActive)},decls:6,vars:2,consts:[["main",""],[1,"w-full","h-full","flex","flex-col"],[1,"px-4","py-2","bg-orange-100","border-l-4","border-orange-500","text-orange-800","text-sm"],[1,"flex-1","overflow-hidden"],["styleClass","h-full overflow-hidden",3,"tabChange","tabs"],[1,"pi","pi-info-circle","mr-2"]],template:function(e,t){if(e&1){let o=G();c(0,"div",1),N(1,ne,7,1,"div",2),c(2,"div",3)(3,"app-dynamic-tab-panel",4),M("tabChange",function(){return w(o),I(t.onTabChange())}),f()()(),E(4,oe,1,0,"ng-template",null,0,q)}e&2&&(m(),x(t.qaTools.testMode()?1:-1),m(2),F("tabs",t.clientTabs()))},dependencies:[te,J],encapsulation:2})};var Ve=[{path:"",component:y,children:[{path:"accounts",children:[{path:"",canActivate:[p("accounts",["client-users","client-user-roles"])],component:i},{path:":type",canActivate:[a],component:i},{path:":type/:entityType/:entityId",canActivate:[a],component:i}]},{path:"details",loadChildren:()=>import("./chunk-XXBYCNQ4.js").then(r=>r.ADMIN_CLIENT_DETAILS_ROUTES),data:{nestedContentScrollable:!0}},{path:"hardware",children:[{path:"",canActivate:[p("hardware",["client-hardware-devices","client-asset-tags","client-sim-cards"])],component:i},{path:":type",canActivate:[a],component:i},{path:":type/:entityType/:entityId",canActivate:[a],component:i}]},{path:"organization",children:[{path:"",canActivate:[p("organization",["client-cost-centres","client-asset-groups","client-asset-categories","client-geofence-groups"])],component:C},{path:":type",canActivate:[a],component:C},{path:":type/:entityType/:entityId",canActivate:[a],component:C}]},{path:"profiles",children:[{path:"",canActivate:[p("profiles",["client-io-types","client-device-config-profiles","client-asset-rating-profiles","client-asset-state-profiles","client-overspeed-profiles","client-road-profiles","client-geo-lock-profiles","client-custom-fields"])],component:i},{path:":type",canActivate:[a],component:i},{path:":type/:entityType/:entityId",canActivate:[a],component:i}]},{path:"providers",children:[{path:"",canActivate:[p("providers",["client-sms-gateway-providers"])],component:i},{path:":type",canActivate:[a],component:i},{path:":type/:entityType/:entityId",canActivate:[a],component:i}]},...h("assets",Z,i,s.assets.permissions,void 0,"grid/:type","client"),...h("geofences",$,i,s.geofences.permissions,void 0,"grid/:type","client"),...h("alerts",ee,i,s.alerts.permissions,void 0,"grid/:type","client"),{path:"",redirectTo:"details",pathMatch:"full"}]}];export{Ve as ADMIN_CLIENT_ROUTES};
